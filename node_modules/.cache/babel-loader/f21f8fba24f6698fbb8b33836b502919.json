{"remainingRequest":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/babel-loader/lib/index.js!/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/src/views/lost-found/LostFound.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/src/views/lost-found/LostFound.vue","mtime":1712673873955},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/babel.config.js","mtime":1712587400021},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/cache-loader/dist/cjs.js","mtime":1712590523146},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/babel-loader/lib/index.js","mtime":1712590523266},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/cache-loader/dist/cjs.js","mtime":1712590523146},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/vue-loader/lib/index.js","mtime":1712590523434}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.starts-with\";\nimport _toConsumableArray from \"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/web.dom.iterable\";\nimport ImageUploader from '@/components/common/ImageUploader';\nexport default {\n  name: 'LostFound',\n  components: {\n    ImageUploader: ImageUploader\n  },\n  data: function data() {\n    return {\n      menu: {\n        active: 'Êü•ÁúãÊâÄÊúâ',\n        items: ['Êü•ÁúãÊâÄÊúâ', 'Â§±Áâ©ÊãõÈ¢Ü', 'ÂØªÁâ©ÂêØ‰∫ã']\n      },\n      param: {\n        // query ÂèÇÊï∞\n        lostFoundCategory: null,\n        general: null,\n        // page & order ÂèÇÊï∞\n        desc: 'create_time',\n        current: 1\n      },\n      lostFoundPage: {\n        'records': [{\n          'id': 1,\n          'userId': 1,\n          'resourceId': 16,\n          'lostFoundCategory': 'ÂØªÁâ©ÂêØ‰∫ã',\n          'title': 'ÂõõÈ£üÂ†Ç‰∏¢Â§±‰∏Ä‰∏™Èí±ÂåÖ',\n          'description': 'Â¶ÇÂõæÔºåÈí±ÂåÖÊòØÈªëËâ≤ÁöÑÔºåÈáåÈù¢ÊúâÂ∞ëÈáèÁé∞ÈáëÂíå‰∏ÄÂº†Â∑•Ë°åÁöÑÂç°',\n          'itemName': 'Èí±ÂåÖ',\n          'time': '2024-05-17 12:10:01',\n          'address': 'ÂõõÈ£üÂ†Ç',\n          'createTime': '2024-05-17 15:39:45',\n          'images': ['https://img12.360buyimg.com/n7/jfs/t22831/61/2367409622/289066/5d9c3f/5b7d10feNe776b305.jpg'],\n          'user': {\n            'id': 1,\n            'username': 'admin',\n            'nickname': 'ÁÆ°ÁêÜÂëò',\n            'avatar': 'http://img.angus-liu.cn/avatar/avatar07.png',\n            'sign': '‰∏ÄÂè•ËØù‰ªãÁªçËá™Â∑±'\n          },\n          'resource': {\n            'id': 16,\n            'zanCount': 0,\n            'pvCount': 0,\n            'commentCount': 0\n          }\n        }],\n        'total': 5,\n        'size': 1,\n        'current': 1,\n        'searchCount': true,\n        'pages': 5\n      },\n      lostFoundAddModal: {\n        show: false,\n        title: 'ÂèëÂ∏ÉÂØªÁâ©ÂêØ‰∫ã',\n        placeholder: {\n          time: 'ËØ∑ÈÄâÊã©‰∏¢Â§±Êó∂Èó¥',\n          address: 'ËØ∑Â°´ÂÜô‰∏¢Â§±Âú∞ÁÇπ'\n        },\n        form: {\n          lostFoundCategory: 'ÂØªÁâ©ÂêØ‰∫ã',\n          title: '',\n          itemName: '',\n          time: null,\n          address: '',\n          description: '',\n          images: null\n        }\n      },\n      commentList: [{\n        id: -1,\n        content: 'ÊµãËØïËØÑËÆ∫',\n        createTime: '2024-05-21 20:15:39',\n        postUser: {\n          id: -1,\n          username: 'admin',\n          nickname: 'ÁÆ°ÁêÜÂëò',\n          avatar: 'http://img.angus-liu.cn/avatar/avatar07.png'\n        },\n        children: [{\n          id: -2,\n          content: 'ÊµãËØïÂõûÂ§ç',\n          createTime: '2024-05-21 20:15:46',\n          postUser: {\n            id: 1,\n            username: 'admin',\n            nickname: 'ÁÆ°ÁêÜÂëò',\n            avatar: 'http://img.angus-liu.cn/avatar/avatar07.png'\n          },\n          replyUser: {\n            id: 1,\n            username: 'admin',\n            nickname: 'ÁÆ°ÁêÜÂëò',\n            avatar: 'http://img.angus-liu.cn/avatar/avatar07.png'\n          }\n        }]\n      }],\n      commentAddModal: {\n        show: false,\n        form: {\n          parentId: null,\n          resourceId: null,\n          replyUserId: null,\n          value: '',\n          content: ''\n        }\n      },\n      currentResource: {}\n    };\n  },\n  methods: {\n    // ÂàáÊç¢ËèúÂçï\n    select: function select(item) {\n      this.menu.active = item;\n      switch (item) {\n        case 'Êü•ÁúãÊâÄÊúâ':\n          this.param.lostFoundCategory = null;\n          break;\n        case 'Â§±Áâ©ÊãõÈ¢Ü':\n          this.param.lostFoundCategory = 'Â§±Áâ©ÊãõÈ¢Ü';\n          break;\n        case 'ÂØªÁâ©ÂêØ‰∫ã':\n          this.param.lostFoundCategory = 'ÂØªÁâ©ÂêØ‰∫ã';\n          break;\n      }\n      this.param.current = 1;\n      this.getLostFoundPage(this.param);\n    },\n    // Ëé∑ÂèñÂ§±Áâ©ÂØªÁâ©ÂàÜÈ°µ\n    getLostFoundPage: function getLostFoundPage(param) {\n      var _this = this;\n      this.$axios.get('/api/lost-found/page', param).then(function (res) {\n        var result = res.data;\n        _this.lostFoundPage = result.data;\n        _this.lostFoundPage.records.forEach(function (lostFound) {\n          if (lostFound.images && lostFound.images.length > 0) {\n            lostFound.images = JSON.parse(lostFound.images);\n          }\n        });\n      });\n    },\n    // ÈÖçÁΩÆÂ§±Áâ©ÂØªÁâ©Ê∑ªÂä†Ê®°ÊÄÅÊ°Ü\n    showLostFoundModal: function showLostFoundModal(type) {\n      if (type === 'ÂØªÁâ©ÂêØ‰∫ã') {\n        this.lostFoundAddModal = {\n          show: true,\n          title: 'ÂèëÂ∏ÉÂØªÁâ©ÂêØ‰∫ã',\n          placeholder: {\n            time: 'ËØ∑ÈÄâÊã©‰∏¢Â§±Êó∂Èó¥',\n            address: 'ËØ∑Â°´ÂÜô‰∏¢Â§±Âú∞ÁÇπ'\n          },\n          form: {\n            lostFoundCategory: 'ÂØªÁâ©ÂêØ‰∫ã',\n            title: '',\n            itemName: '',\n            time: null,\n            address: '',\n            description: '',\n            images: null\n          }\n        };\n      } else {\n        this.lostFoundAddModal = {\n          show: true,\n          title: 'ÂèëÂ∏ÉÂ§±Áâ©ÊãõÈ¢Ü',\n          placeholder: {\n            time: 'ËØ∑ÈÄâÊã©ÊãæÂèñÊó∂Èó¥',\n            address: 'ËØ∑Â°´ÂÜôÊãæÂèñÂú∞ÁÇπ'\n          },\n          form: {\n            lostFoundCategory: 'Â§±Áâ©ÊãõÈ¢Ü',\n            title: '',\n            itemName: '',\n            time: null,\n            address: '',\n            description: '',\n            images: null\n          }\n        };\n      }\n    },\n    // Ê∑ªÂä†Â§±Áâ©ÂØªÁâ©\n    addLostFound: function addLostFound() {\n      var _this2 = this;\n      var lostFoundAddForm = this.lostFoundAddModal.form;\n      lostFoundAddForm.images = JSON.stringify(lostFoundAddForm.images);\n      this.$axios.post('/api/lost-found', lostFoundAddForm).then(function (res) {\n        var result = res.data;\n        if (result.success) {\n          _this2.$Notice.success({\n            title: 'Bingo',\n            desc: 'ÂèëÂ∏ÉÊàêÂäü'\n          });\n          _this2.lostFoundAddModal.show = false;\n          _this2.$refs.imageUploader.clearImages();\n          _this2.getLostFoundPage(_this2.param);\n        }\n      });\n    },\n    // Âä†ËΩΩÊõ¥Â§ö\n    loadMore: function loadMore() {\n      var _this3 = this;\n      this.param.current++;\n      this.$axios.get('/api/lost-found/page', this.param).then(function (res) {\n        var _this3$lostFoundPage$;\n        var result = res.data;\n        var moreLostFoundPage = result.data;\n        moreLostFoundPage.records.forEach(function (lostFound) {\n          if (lostFound.images && lostFound.images.length > 0) {\n            lostFound.images = JSON.parse(lostFound.images);\n          }\n        });\n        (_this3$lostFoundPage$ = _this3.lostFoundPage.records).push.apply(_this3$lostFoundPage$, _toConsumableArray(moreLostFoundPage.records));\n      });\n    },\n    // ÁÇπËµû\n    addZan: function addZan(resource) {\n      this.$axios.post('/api/zan', {\n        resourceId: resource.id\n      }).then(function (res) {\n        return resource.zanCount++;\n      });\n    },\n    // Ëé∑ÂèñËØÑËÆ∫\n    getCommentList: function getCommentList(resource) {\n      var _this4 = this;\n      this.currentResource = resource;\n      this.$axios.get(\"/api/comment/\".concat(resource.id)).then(function (res) {\n        var result = res.data;\n        _this4.commentList = result.data;\n        // Â±ïÁ§∫ËØÑËÆ∫\n        _this4.commentAddModal.show = true;\n      });\n    },\n    // ÂàùÂßãÂåñËØÑËÆ∫\n    initComment: function initComment() {\n      this.commentAddModal.form = {\n        resourceId: null,\n        parentId: null,\n        replyUserId: null,\n        value: '',\n        content: ''\n      };\n    },\n    // Ê∑ªÂä†ËØÑËÆ∫\n    addComment: function addComment() {\n      var _this5 = this;\n      // ËÆæÁΩÆËµÑÊ∫ê ID\n      this.commentAddModal.form.resourceId = this.currentResource.id;\n      // Âà§Êñ≠ÊòØËØÑËÆ∫ËøòÊòØÂõûÂ§ç\n      if (this.commentAddModal.form.value.startsWith('@') && this.commentAddModal.form.replyUserId !== null) {\n        // ÂõûÂ§çÊó∂ÂéªÊéâËØÑËÆ∫ÂÜÖÂÆπ‰∏≠ÁöÑÂõûÂ§çÁî®Êà∑Âêç\n        var index = this.commentAddModal.form.value.indexOf(' ');\n        this.commentAddModal.form.content = this.commentAddModal.form.value.substr(index + 1);\n      } else {\n        this.commentAddModal.form.parentId = null;\n        this.commentAddModal.form.replyUserId = null;\n        this.commentAddModal.form.content = this.commentAddModal.form.value;\n      }\n      this.$axios.post('/api/comment', this.commentAddModal.form).then(function (res) {\n        _this5.initComment();\n        _this5.currentResource.commentCount++;\n        _this5.getCommentList(_this5.currentResource);\n      });\n    },\n    // ÂõûÂ§çËØÑËÆ∫\n    replyComment: function replyComment(parentId, replyUser) {\n      this.commentAddModal.form.parentId = parentId;\n      this.commentAddModal.form.replyUserId = replyUser.id;\n      this.commentAddModal.form.value = \"@\".concat(replyUser.nickname, \" \");\n      this.$refs.commentInput.focus();\n    }\n  },\n  mounted: function mounted() {\n    this.getLostFoundPage(this.param);\n  }\n};",{"version":3,"names":["ImageUploader","name","components","data","menu","active","items","param","lostFoundCategory","general","desc","current","lostFoundPage","lostFoundAddModal","show","title","placeholder","time","address","form","itemName","description","images","commentList","id","content","createTime","postUser","username","nickname","avatar","children","replyUser","commentAddModal","parentId","resourceId","replyUserId","value","currentResource","methods","select","item","getLostFoundPage","_this","$axios","get","then","res","result","records","forEach","lostFound","length","JSON","parse","showLostFoundModal","type","addLostFound","_this2","lostFoundAddForm","stringify","post","success","$Notice","$refs","imageUploader","clearImages","loadMore","_this3","_this3$lostFoundPage$","moreLostFoundPage","push","apply","_toConsumableArray","addZan","resource","zanCount","getCommentList","_this4","concat","initComment","addComment","_this5","startsWith","index","indexOf","substr","commentCount","replyComment","commentInput","focus","mounted"],"sources":["src/views/lost-found/LostFound.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <Row>\n      <iCol class=\"column\" span=\"16\">\n        <!-- Â§±Áâ©ÂØªÁâ©ËèúÂçï -->\n        <sui-menu>\n          <sui-menu-item link v-for=\"item in menu.items\" :key=\"item\" :content=\"item\"\n                         :active=\"item === menu.active\" @click=\"select(item)\"/>\n          <sui-menu-item position=\"right\">\n            <sui-input transparent icon=\"search\" placeholder=\"ÊêúÁ¥¢\"\n                       v-model=\"param.general\" @keydown.enter=\"getLostFoundPage(param)\"/>\n          </sui-menu-item>\n        </sui-menu>\n        <!-- Â§±Áâ©ÂØªÁâ©ËèúÂçï END -->\n        <!-- Â§±Áâ©ÂØªÁâ©ÂàóË°® -->\n        <sui-card class=\"fluid lost-found-card\" v-for=\"lostFound in lostFoundPage.records\" :key=\"lostFound.id\">\n          <sui-card-content>\n            <sui-feed>\n              <sui-feed-event>\n                <sui-feed-content>\n                  <sui-feed-summary>\n                    <sui-label class=\"lost-found-category\" basic\n                               :color=\"lostFound.lostFoundCategory === 'ÂØªÁâ©ÂêØ‰∫ã'? 'red':'green'\">\n                      {{lostFound.lostFoundCategory}}\n                    </sui-label>\n                    <router-link class=\"lost-found-title\" :to=\"'/lost-found/' + lostFound.id\">{{lostFound.title}}\n                    </router-link>\n                    <sui-feed-date>\n                      <Time :time=\"lostFound.createTime\"/>\n                    </sui-feed-date>\n                  </sui-feed-summary>\n                  <sui-feed-extra class=\"lost-found-extra\" text>\n                    <Row>\n                      <iCol span=\"7\">üëú {{lostFound.itemName}}</iCol>\n                      <iCol span=\"9\">üïì {{lostFound.time}}</iCol>\n                      <iCol span=\"5\" offset=\"3\">üìç {{lostFound.address}}</iCol>\n                    </Row>\n                    <div class=\"lost-found-description\">{{lostFound.description}}</div>\n                  </sui-feed-extra>\n                  <sui-feed-extra class=\"lost-found-images\" images\n                                  v-if=\"lostFound.images && lostFound.images.length > 0\">\n                    <img v-for=\"img in lostFound.images\" :src=\"img\">\n                  </sui-feed-extra>\n                  <sui-feed-meta>\n                    <router-link :to=\"'/user/' + lostFound.user.id\">\n                      <sui-image :src=\"lostFound.user.avatar\" size=\"medium\" avatar/>\n                      <span style=\"position: relative; top: 2px\">{{lostFound.user.nickname}}</span>\n                    </router-link>\n                    <sui-feed-like @click=\"addZan(lostFound.resource)\">\n                      üëç {{lostFound.resource.zanCount}}\n                    </sui-feed-like>\n                    <sui-feed-like @click=\"getCommentList(lostFound.resource)\">\n                      üí¨ {{lostFound.resource.commentCount}}\n                    </sui-feed-like>\n                  </sui-feed-meta>\n                </sui-feed-content>\n              </sui-feed-event>\n            </sui-feed>\n          </sui-card-content>\n        </sui-card>\n        <!-- Â§±Áâ©ÂØªÁâ©ÂàóË°® END -->\n        <!-- Âä†ËΩΩÊõ¥Â§ö -->\n        <sui-button class=\"fluid\" basic content=\"Âä†ËΩΩÊõ¥Â§ö\" @click=\"loadMore\"\n                    :disabled=\"param.current >= lostFoundPage.pages\"/>\n        <!-- Âä†ËΩΩÊõ¥Â§ö END -->\n      </iCol>\n      <iCol class=\"column\" span=\"8\">\n        <!-- ÂØªÁâ©ÂêØ‰∫ãÊèêÁ§∫ -->\n        <sui-card class=\"fluid\">\n          <sui-message attached=\"top\" icon=\"eye\" negative>\n            <sui-message-header>ÂØªÁâ©ÂêØ‰∫ãÂ∞èË¥¥Â£´</sui-message-header>\n            <p>‰ªÄ‰πàÔºåÊúâ‰∏úË•ø‰∏¢Âï¶Ôºü‰∏çË¶ÅÊÄïÔºåÂø´Êù•ÂèëÂ∏É‰∏ÄÊù°ÂØªÁâ©ÂêØ‰∫ãÂêßÔºåÂæàÂø´Â∞±‰ºöÊúâÂ•ΩÂøÉ‰∫∫ËÅîÁ≥ª‰Ω†Âï¶„ÄÇÂØπÂï¶Ôºå‰∏ÄÂÆöË¶ÅÊ†∏ÂÆû‰ø°ÊÅØÔºåÂáÜÁ°ÆÂêéÂÜçÂèëÂ∏ÉÂì¶ üòÉ</p>\n          </sui-message>\n          <sui-button attached=\"bottom\" icon=\"add\" content=\"ÂèëÂ∏ÉÂØªÁâ©ÂêØ‰∫ã\" @click=\"showLostFoundModal('ÂØªÁâ©ÂêØ‰∫ã')\"/>\n        </sui-card>\n        <!-- ÂØªÁâ©ÂêØ‰∫ãÊèêÁ§∫ END -->\n        <!-- Â§±Áâ©ÊãõÈ¢ÜÊèêÁ§∫ -->\n        <sui-card class=\"fluid\">\n          <sui-message attached=\"top\" icon=\"bullhorn\" positive>\n            <sui-message-content>\n              <sui-message-header>Â§±Áâ©ÊãõÈ¢ÜÂ∞èË¥¥Â£´</sui-message-header>\n              <p>Êç°Âà∞Âì™‰ΩçÂêåÂ≠¶‰∏çÂ∞è‰ø°ÊéâËêΩÁöÑÁâ©ÂìÅÂï¶ÔºüÂø´ÂèëÂ∏É‰∏ÄÊù°Â§±Áâ©ÊãõÈ¢ÜÂêßÔºåÂ§±‰∏ª‰∏ÄÂÆö‰ºöÈùûÂ∏∏ÈùûÂ∏∏ÊÑüÊøÄ‰Ω†Âë¢ üòò</p>\n            </sui-message-content>\n          </sui-message>\n          <sui-button attached=\"bottom\" icon=\"add\" content=\"ÂèëÂ∏ÉÂ§±Áâ©ÊãõÈ¢Ü\" @click=\"showLostFoundModal('Â§±Áâ©ÊãõÈ¢Ü')\"/>\n        </sui-card>\n        <!-- Â§±Áâ©ÊãõÈ¢ÜÊèêÁ§∫ END -->\n      </iCol>\n    </Row>\n    <!-- Â§±Áâ©ÂØªÁâ©Ê∑ªÂä†Ê®°ÊÄÅÊ°Ü -->\n    <Modal v-model=\"lostFoundAddModal.show\" :title=\"lostFoundAddModal.title\" width=\"600\" scrollable>\n      <Form :model=\"lostFoundAddModal.form\" :label-width=\"50\">\n        <FormItem label=\"Ê†áÈ¢ò\" required>\n          <Input v-model=\"lostFoundAddModal.form.title\" size=\"large\" placeholder=\"Ê∏ÖÊô∞ÁöÑÊ†áÈ¢òËÉΩËÆ©Êõ¥Â§ö‰∫∫Ê≥®ÊÑèÂà∞\"/>\n        </FormItem>\n        <FormItem label=\"Áâ©ÂìÅ\" required>\n          <Input v-model=\"lostFoundAddModal.form.itemName\" size=\"large\" placeholder=\"ËØ∑Â°´ÂÜôÁâ©ÂìÅÂêç\"/>\n        </FormItem>\n        <FormItem label=\"Êó∂Èó¥\" required>\n          <DatePicker :value=\"lostFoundAddModal.form.time\" @on-change=\"time => lostFoundAddModal.form.time = time\"\n                      type=\"datetime\" size=\"large\" :placeholder=\"lostFoundAddModal.placeholder.time\"\n                      style=\"width: 100%\"/>\n        </FormItem>\n        <FormItem label=\"Âú∞ÁÇπ\" required>\n          <Input v-model=\"lostFoundAddModal.form.address\" size=\"large\"\n                 :placeholder=\"lostFoundAddModal.placeholder.address\"/>\n        </FormItem>\n        <FormItem label=\"ÊèèËø∞\" required>\n          <Input v-model=\"lostFoundAddModal.form.description\" type=\"textarea\" size=\"large\"\n                 :autosize=\"{minRows: 5,maxRows: 10}\" placeholder=\"ËæìÂÖ•Áâ©ÂìÅÊèèËø∞ÔºåÊúâÂä©‰∫é‰ªñ‰∫∫Ëé∑Âèñ‰ø°ÊÅØ\"/>\n        </FormItem>\n        <FormItem label=\"ÂõæÁâá\" style=\"margin-bottom: 0\">\n          <ImageUploader ref=\"imageUploader\" @images-change=\"images => lostFoundAddModal.form.images = images\"/>\n        </FormItem>\n      </Form>\n      <template #footer>\n        <Button type=\"text\" @click=\"lostFoundAddModal.show = false\">ÂèñÊ∂à</Button>\n        <Button @click=\"addLostFound\">Á°ÆÂÆöÂèëÂ∏É</Button>\n      </template>\n    </Modal>\n    <!-- Â§±Áâ©ÂØªÁâ©Ê∑ªÂä†Ê®°ÊÄÅÊ°Ü END -->\n    <!-- ËØÑËÆ∫Ê®°ÊÄÅÊ°Ü -->\n    <Modal v-model=\"commentAddModal.show\" title=\"ÂèëË°®ËØÑËÆ∫\" width=\"600\" footer-hide>\n      <Input ref=\"commentInput\" v-model=\"commentAddModal.form.value\" type=\"textarea\" :rows=\"3\" placeholder=\"Ê∑ªÂä†ËØÑËÆ∫\"\n             @on-enter=\"addComment\"/>\n      <sui-comment-group class=\"comment-group\">\n        <sui-comment v-for=\"comment in commentList\" :key=\"comment.id\">\n          <sui-comment-avatar :src=\"comment.postUser.avatar\"/>\n          <sui-comment-content>\n            <a is=\"sui-comment-author\">{{comment.postUser.nickname}}</a>\n            <sui-comment-metadata>\n              <Time :time=\"comment.createTime\"/>\n            </sui-comment-metadata>\n            <sui-comment-text>{{comment.content}}</sui-comment-text>\n            <sui-comment-actions>\n              <sui-comment-action @click=\"replyComment(comment.id, comment.postUser)\">ÂõûÂ§ç</sui-comment-action>\n            </sui-comment-actions>\n          </sui-comment-content>\n          <!-- Â≠êËØÑËÆ∫ -->\n          <sui-comment-group v-if=\"comment.children.length > 0\">\n            <sui-comment v-for=\"child in comment.children\" :key=\"child.id\">\n              <sui-comment-avatar :src=\"child.postUser.avatar\"/>\n              <sui-comment-content>\n                <a is=\"sui-comment-author\">{{child.postUser.nickname}}</a>\n                <sui-comment-metadata>\n                  <Time :time=\"child.createTime\"/>\n                </sui-comment-metadata>\n                <sui-comment-text>\n                  <a :href=\"child.replyUser.id\">@{{child.replyUser.nickname}}</a>\n                  {{child.content}}\n                </sui-comment-text>\n                <sui-comment-actions>\n                  <sui-comment-action @click=\"replyComment(comment.id, child.postUser)\">ÂõûÂ§ç</sui-comment-action>\n                </sui-comment-actions>\n              </sui-comment-content>\n            </sui-comment>\n          </sui-comment-group>\n          <!-- Â≠êËØÑËÆ∫ END -->\n        </sui-comment>\n      </sui-comment-group>\n    </Modal>\n    <!-- ËØÑËÆ∫Ê®°ÊÄÅÊ°Ü END -->\n  </div>\n</template>\n\n<script>\nimport ImageUploader from '@/components/common/ImageUploader'\n\nexport default {\n  name: 'LostFound',\n  components: {\n    ImageUploader\n  },\n  data() {\n    return {\n      menu: {\n        active: 'Êü•ÁúãÊâÄÊúâ',\n        items: ['Êü•ÁúãÊâÄÊúâ', 'Â§±Áâ©ÊãõÈ¢Ü', 'ÂØªÁâ©ÂêØ‰∫ã'],\n      },\n      param: {\n        // query ÂèÇÊï∞\n        lostFoundCategory: null,\n        general: null,\n        // page & order ÂèÇÊï∞\n        desc: 'create_time',\n        current: 1\n      },\n      lostFoundPage: {\n        'records': [\n          {\n            'id': 1,\n            'userId': 1,\n            'resourceId': 16,\n            'lostFoundCategory': 'ÂØªÁâ©ÂêØ‰∫ã',\n            'title': 'ÂõõÈ£üÂ†Ç‰∏¢Â§±‰∏Ä‰∏™Èí±ÂåÖ',\n            'description': 'Â¶ÇÂõæÔºåÈí±ÂåÖÊòØÈªëËâ≤ÁöÑÔºåÈáåÈù¢ÊúâÂ∞ëÈáèÁé∞ÈáëÂíå‰∏ÄÂº†Â∑•Ë°åÁöÑÂç°',\n            'itemName': 'Èí±ÂåÖ',\n            'time': '2024-05-17 12:10:01',\n            'address': 'ÂõõÈ£üÂ†Ç',\n            'createTime': '2024-05-17 15:39:45',\n            'images': ['https://img12.360buyimg.com/n7/jfs/t22831/61/2367409622/289066/5d9c3f/5b7d10feNe776b305.jpg'],\n            'user': {\n              'id': 1,\n              'username': 'admin',\n              'nickname': 'ÁÆ°ÁêÜÂëò',\n              'avatar': 'http://img.angus-liu.cn/avatar/avatar07.png',\n              'sign': '‰∏ÄÂè•ËØù‰ªãÁªçËá™Â∑±'\n            },\n            'resource': {\n              'id': 16,\n              'zanCount': 0,\n              'pvCount': 0,\n              'commentCount': 0\n            }\n          }\n        ],\n        'total': 5,\n        'size': 1,\n        'current': 1,\n        'searchCount': true,\n        'pages': 5\n      },\n      lostFoundAddModal: {\n        show: false,\n        title: 'ÂèëÂ∏ÉÂØªÁâ©ÂêØ‰∫ã',\n        placeholder: {\n          time: 'ËØ∑ÈÄâÊã©‰∏¢Â§±Êó∂Èó¥',\n          address: 'ËØ∑Â°´ÂÜô‰∏¢Â§±Âú∞ÁÇπ'\n        },\n        form: {\n          lostFoundCategory: 'ÂØªÁâ©ÂêØ‰∫ã',\n          title: '',\n          itemName: '',\n          time: null,\n          address: '',\n          description: '',\n          images: null,\n        }\n      },\n      commentList: [{\n        id: -1,\n        content: 'ÊµãËØïËØÑËÆ∫',\n        createTime: '2024-05-21 20:15:39',\n        postUser: {\n          id: -1,\n          username: 'admin',\n          nickname: 'ÁÆ°ÁêÜÂëò',\n          avatar: 'http://img.angus-liu.cn/avatar/avatar07.png'\n        },\n        children: [\n          {\n            id: -2,\n            content: 'ÊµãËØïÂõûÂ§ç',\n            createTime: '2024-05-21 20:15:46',\n            postUser: {\n              id: 1,\n              username: 'admin',\n              nickname: 'ÁÆ°ÁêÜÂëò',\n              avatar: 'http://img.angus-liu.cn/avatar/avatar07.png'\n            },\n            replyUser: {\n              id: 1,\n              username: 'admin',\n              nickname: 'ÁÆ°ÁêÜÂëò',\n              avatar: 'http://img.angus-liu.cn/avatar/avatar07.png'\n            }\n          }\n        ]\n      }],\n      commentAddModal: {\n        show: false,\n        form: {\n          parentId: null,\n          resourceId: null,\n          replyUserId: null,\n          value: '',\n          content: ''\n        }\n      },\n      currentResource: {}\n    }\n  },\n  methods: {\n    // ÂàáÊç¢ËèúÂçï\n    select(item) {\n      this.menu.active = item;\n      switch (item) {\n        case 'Êü•ÁúãÊâÄÊúâ':\n          this.param.lostFoundCategory = null;\n          break;\n        case 'Â§±Áâ©ÊãõÈ¢Ü':\n          this.param.lostFoundCategory = 'Â§±Áâ©ÊãõÈ¢Ü';\n          break;\n        case 'ÂØªÁâ©ÂêØ‰∫ã':\n          this.param.lostFoundCategory = 'ÂØªÁâ©ÂêØ‰∫ã';\n          break;\n      }\n      this.param.current = 1;\n      this.getLostFoundPage(this.param);\n    },\n    // Ëé∑ÂèñÂ§±Áâ©ÂØªÁâ©ÂàÜÈ°µ\n    getLostFoundPage(param) {\n      this.$axios.get('/api/lost-found/page', param)\n        .then(res => {\n          let result = res.data;\n          this.lostFoundPage = result.data;\n          this.lostFoundPage.records.forEach(lostFound => {\n            if (lostFound.images && lostFound.images.length > 0) {\n              lostFound.images = JSON.parse(lostFound.images);\n            }\n          })\n        })\n    },\n    // ÈÖçÁΩÆÂ§±Áâ©ÂØªÁâ©Ê∑ªÂä†Ê®°ÊÄÅÊ°Ü\n    showLostFoundModal(type) {\n      if (type === 'ÂØªÁâ©ÂêØ‰∫ã') {\n        this.lostFoundAddModal = {\n          show: true,\n          title: 'ÂèëÂ∏ÉÂØªÁâ©ÂêØ‰∫ã',\n          placeholder: {\n            time: 'ËØ∑ÈÄâÊã©‰∏¢Â§±Êó∂Èó¥',\n            address: 'ËØ∑Â°´ÂÜô‰∏¢Â§±Âú∞ÁÇπ'\n          },\n          form: {\n            lostFoundCategory: 'ÂØªÁâ©ÂêØ‰∫ã',\n            title: '',\n            itemName: '',\n            time: null,\n            address: '',\n            description: '',\n            images: null,\n          }\n        }\n      } else {\n        this.lostFoundAddModal = {\n          show: true,\n          title: 'ÂèëÂ∏ÉÂ§±Áâ©ÊãõÈ¢Ü',\n          placeholder: {\n            time: 'ËØ∑ÈÄâÊã©ÊãæÂèñÊó∂Èó¥',\n            address: 'ËØ∑Â°´ÂÜôÊãæÂèñÂú∞ÁÇπ'\n          },\n          form: {\n            lostFoundCategory: 'Â§±Áâ©ÊãõÈ¢Ü',\n            title: '',\n            itemName: '',\n            time: null,\n            address: '',\n            description: '',\n            images: null,\n          }\n        }\n      }\n    },\n    // Ê∑ªÂä†Â§±Áâ©ÂØªÁâ©\n    addLostFound() {\n      let lostFoundAddForm = this.lostFoundAddModal.form;\n      lostFoundAddForm.images = JSON.stringify(lostFoundAddForm.images);\n      this.$axios.post('/api/lost-found', lostFoundAddForm)\n        .then(res => {\n          let result = res.data;\n          if (result.success) {\n            this.$Notice.success({ title: 'Bingo', desc: 'ÂèëÂ∏ÉÊàêÂäü' });\n            this.lostFoundAddModal.show = false;\n            this.$refs.imageUploader.clearImages();\n            this.getLostFoundPage(this.param);\n          }\n        });\n    },\n    // Âä†ËΩΩÊõ¥Â§ö\n    loadMore() {\n      this.param.current++;\n      this.$axios.get('/api/lost-found/page', this.param)\n        .then(res => {\n          let result = res.data;\n          let moreLostFoundPage = result.data;\n          moreLostFoundPage.records.forEach(lostFound => {\n            if (lostFound.images && lostFound.images.length > 0) {\n              lostFound.images = JSON.parse(lostFound.images);\n            }\n          });\n          this.lostFoundPage.records.push(...moreLostFoundPage.records);\n        });\n    },\n    // ÁÇπËµû\n    addZan(resource) {\n      this.$axios.post('/api/zan', { resourceId: resource.id })\n        .then(res => resource.zanCount++);\n    },\n    // Ëé∑ÂèñËØÑËÆ∫\n    getCommentList(resource) {\n      this.currentResource = resource;\n      this.$axios.get(`/api/comment/${resource.id}`)\n        .then(res => {\n          let result = res.data;\n          this.commentList = result.data;\n          // Â±ïÁ§∫ËØÑËÆ∫\n          this.commentAddModal.show = true;\n        });\n    },\n    // ÂàùÂßãÂåñËØÑËÆ∫\n    initComment() {\n      this.commentAddModal.form = {\n        resourceId: null,\n        parentId: null,\n        replyUserId: null,\n        value: '',\n        content: ''\n      }\n    },\n    // Ê∑ªÂä†ËØÑËÆ∫\n    addComment() {\n      // ËÆæÁΩÆËµÑÊ∫ê ID\n      this.commentAddModal.form.resourceId = this.currentResource.id;\n      // Âà§Êñ≠ÊòØËØÑËÆ∫ËøòÊòØÂõûÂ§ç\n      if (this.commentAddModal.form.value.startsWith('@')\n        && this.commentAddModal.form.replyUserId !== null) {\n        // ÂõûÂ§çÊó∂ÂéªÊéâËØÑËÆ∫ÂÜÖÂÆπ‰∏≠ÁöÑÂõûÂ§çÁî®Êà∑Âêç\n        let index = this.commentAddModal.form.value.indexOf(' ');\n        this.commentAddModal.form.content = this.commentAddModal.form.value.substr(index + 1);\n      } else {\n        this.commentAddModal.form.parentId = null;\n        this.commentAddModal.form.replyUserId = null;\n        this.commentAddModal.form.content = this.commentAddModal.form.value;\n      }\n      this.$axios.post('/api/comment', this.commentAddModal.form)\n        .then(res => {\n          this.initComment();\n          this.currentResource.commentCount++;\n          this.getCommentList(this.currentResource);\n        });\n    },\n    // ÂõûÂ§çËØÑËÆ∫\n    replyComment(parentId, replyUser) {\n      this.commentAddModal.form.parentId = parentId;\n      this.commentAddModal.form.replyUserId = replyUser.id;\n      this.commentAddModal.form.value = `@${replyUser.nickname} `;\n      this.$refs.commentInput.focus();\n    }\n  },\n  mounted() {\n    this.getLostFoundPage(this.param);\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.container {\n  width: 1140px;\n  margin: 0 auto;\n  padding: 5px;\n\n  .column {\n    padding: 7px;\n  }\n\n  .lost-found-card {\n    .lost-found-category {\n      margin-right: 5px;\n    }\n\n    a.lost-found-title {\n      color: #455A64;\n    }\n\n    a.lost-found-title:hover {\n      color: #FF8364;\n    }\n\n    .lost-found-extra {\n      width: 100%;\n\n      .lost-found-description {\n        margin: 10px 0;\n        color: #444;\n      }\n    }\n  }\n}\n</style>\n"],"mappings":";;;AAsKA,OAAAA,aAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAF,aAAA,EAAAA;EACA;EACAG,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;QACAC,MAAA;QACAC,KAAA;MACA;MACAC,KAAA;QACA;QACAC,iBAAA;QACAC,OAAA;QACA;QACAC,IAAA;QACAC,OAAA;MACA;MACAC,aAAA;QACA,YACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;YACA;YACA;YACA;YACA;YACA;UACA;UACA;YACA;YACA;YACA;YACA;UACA;QACA,EACA;QACA;QACA;QACA;QACA;QACA;MACA;MACAC,iBAAA;QACAC,IAAA;QACAC,KAAA;QACAC,WAAA;UACAC,IAAA;UACAC,OAAA;QACA;QACAC,IAAA;UACAX,iBAAA;UACAO,KAAA;UACAK,QAAA;UACAH,IAAA;UACAC,OAAA;UACAG,WAAA;UACAC,MAAA;QACA;MACA;MACAC,WAAA;QACAC,EAAA;QACAC,OAAA;QACAC,UAAA;QACAC,QAAA;UACAH,EAAA;UACAI,QAAA;UACAC,QAAA;UACAC,MAAA;QACA;QACAC,QAAA,GACA;UACAP,EAAA;UACAC,OAAA;UACAC,UAAA;UACAC,QAAA;YACAH,EAAA;YACAI,QAAA;YACAC,QAAA;YACAC,MAAA;UACA;UACAE,SAAA;YACAR,EAAA;YACAI,QAAA;YACAC,QAAA;YACAC,MAAA;UACA;QACA;MAEA;MACAG,eAAA;QACAnB,IAAA;QACAK,IAAA;UACAe,QAAA;UACAC,UAAA;UACAC,WAAA;UACAC,KAAA;UACAZ,OAAA;QACA;MACA;MACAa,eAAA;IACA;EACA;EACAC,OAAA;IACA;IACAC,MAAA,WAAAA,OAAAC,IAAA;MACA,KAAArC,IAAA,CAAAC,MAAA,GAAAoC,IAAA;MACA,QAAAA,IAAA;QACA;UACA,KAAAlC,KAAA,CAAAC,iBAAA;UACA;QACA;UACA,KAAAD,KAAA,CAAAC,iBAAA;UACA;QACA;UACA,KAAAD,KAAA,CAAAC,iBAAA;UACA;MACA;MACA,KAAAD,KAAA,CAAAI,OAAA;MACA,KAAA+B,gBAAA,MAAAnC,KAAA;IACA;IACA;IACAmC,gBAAA,WAAAA,iBAAAnC,KAAA;MAAA,IAAAoC,KAAA;MACA,KAAAC,MAAA,CAAAC,GAAA,yBAAAtC,KAAA,EACAuC,IAAA,WAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAA5C,IAAA;QACAwC,KAAA,CAAA/B,aAAA,GAAAoC,MAAA,CAAA7C,IAAA;QACAwC,KAAA,CAAA/B,aAAA,CAAAqC,OAAA,CAAAC,OAAA,WAAAC,SAAA;UACA,IAAAA,SAAA,CAAA7B,MAAA,IAAA6B,SAAA,CAAA7B,MAAA,CAAA8B,MAAA;YACAD,SAAA,CAAA7B,MAAA,GAAA+B,IAAA,CAAAC,KAAA,CAAAH,SAAA,CAAA7B,MAAA;UACA;QACA;MACA;IACA;IACA;IACAiC,kBAAA,WAAAA,mBAAAC,IAAA;MACA,IAAAA,IAAA;QACA,KAAA3C,iBAAA;UACAC,IAAA;UACAC,KAAA;UACAC,WAAA;YACAC,IAAA;YACAC,OAAA;UACA;UACAC,IAAA;YACAX,iBAAA;YACAO,KAAA;YACAK,QAAA;YACAH,IAAA;YACAC,OAAA;YACAG,WAAA;YACAC,MAAA;UACA;QACA;MACA;QACA,KAAAT,iBAAA;UACAC,IAAA;UACAC,KAAA;UACAC,WAAA;YACAC,IAAA;YACAC,OAAA;UACA;UACAC,IAAA;YACAX,iBAAA;YACAO,KAAA;YACAK,QAAA;YACAH,IAAA;YACAC,OAAA;YACAG,WAAA;YACAC,MAAA;UACA;QACA;MACA;IACA;IACA;IACAmC,YAAA,WAAAA,aAAA;MAAA,IAAAC,MAAA;MACA,IAAAC,gBAAA,QAAA9C,iBAAA,CAAAM,IAAA;MACAwC,gBAAA,CAAArC,MAAA,GAAA+B,IAAA,CAAAO,SAAA,CAAAD,gBAAA,CAAArC,MAAA;MACA,KAAAsB,MAAA,CAAAiB,IAAA,oBAAAF,gBAAA,EACAb,IAAA,WAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAA5C,IAAA;QACA,IAAA6C,MAAA,CAAAc,OAAA;UACAJ,MAAA,CAAAK,OAAA,CAAAD,OAAA;YAAA/C,KAAA;YAAAL,IAAA;UAAA;UACAgD,MAAA,CAAA7C,iBAAA,CAAAC,IAAA;UACA4C,MAAA,CAAAM,KAAA,CAAAC,aAAA,CAAAC,WAAA;UACAR,MAAA,CAAAhB,gBAAA,CAAAgB,MAAA,CAAAnD,KAAA;QACA;MACA;IACA;IACA;IACA4D,QAAA,WAAAA,SAAA;MAAA,IAAAC,MAAA;MACA,KAAA7D,KAAA,CAAAI,OAAA;MACA,KAAAiC,MAAA,CAAAC,GAAA,8BAAAtC,KAAA,EACAuC,IAAA,WAAAC,GAAA;QAAA,IAAAsB,qBAAA;QACA,IAAArB,MAAA,GAAAD,GAAA,CAAA5C,IAAA;QACA,IAAAmE,iBAAA,GAAAtB,MAAA,CAAA7C,IAAA;QACAmE,iBAAA,CAAArB,OAAA,CAAAC,OAAA,WAAAC,SAAA;UACA,IAAAA,SAAA,CAAA7B,MAAA,IAAA6B,SAAA,CAAA7B,MAAA,CAAA8B,MAAA;YACAD,SAAA,CAAA7B,MAAA,GAAA+B,IAAA,CAAAC,KAAA,CAAAH,SAAA,CAAA7B,MAAA;UACA;QACA;QACA,CAAA+C,qBAAA,GAAAD,MAAA,CAAAxD,aAAA,CAAAqC,OAAA,EAAAsB,IAAA,CAAAC,KAAA,CAAAH,qBAAA,EAAAI,kBAAA,CAAAH,iBAAA,CAAArB,OAAA;MACA;IACA;IACA;IACAyB,MAAA,WAAAA,OAAAC,QAAA;MACA,KAAA/B,MAAA,CAAAiB,IAAA;QAAA1B,UAAA,EAAAwC,QAAA,CAAAnD;MAAA,GACAsB,IAAA,WAAAC,GAAA;QAAA,OAAA4B,QAAA,CAAAC,QAAA;MAAA;IACA;IACA;IACAC,cAAA,WAAAA,eAAAF,QAAA;MAAA,IAAAG,MAAA;MACA,KAAAxC,eAAA,GAAAqC,QAAA;MACA,KAAA/B,MAAA,CAAAC,GAAA,iBAAAkC,MAAA,CAAAJ,QAAA,CAAAnD,EAAA,GACAsB,IAAA,WAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAA5C,IAAA;QACA2E,MAAA,CAAAvD,WAAA,GAAAyB,MAAA,CAAA7C,IAAA;QACA;QACA2E,MAAA,CAAA7C,eAAA,CAAAnB,IAAA;MACA;IACA;IACA;IACAkE,WAAA,WAAAA,YAAA;MACA,KAAA/C,eAAA,CAAAd,IAAA;QACAgB,UAAA;QACAD,QAAA;QACAE,WAAA;QACAC,KAAA;QACAZ,OAAA;MACA;IACA;IACA;IACAwD,UAAA,WAAAA,WAAA;MAAA,IAAAC,MAAA;MACA;MACA,KAAAjD,eAAA,CAAAd,IAAA,CAAAgB,UAAA,QAAAG,eAAA,CAAAd,EAAA;MACA;MACA,SAAAS,eAAA,CAAAd,IAAA,CAAAkB,KAAA,CAAA8C,UAAA,SACA,KAAAlD,eAAA,CAAAd,IAAA,CAAAiB,WAAA;QACA;QACA,IAAAgD,KAAA,QAAAnD,eAAA,CAAAd,IAAA,CAAAkB,KAAA,CAAAgD,OAAA;QACA,KAAApD,eAAA,CAAAd,IAAA,CAAAM,OAAA,QAAAQ,eAAA,CAAAd,IAAA,CAAAkB,KAAA,CAAAiD,MAAA,CAAAF,KAAA;MACA;QACA,KAAAnD,eAAA,CAAAd,IAAA,CAAAe,QAAA;QACA,KAAAD,eAAA,CAAAd,IAAA,CAAAiB,WAAA;QACA,KAAAH,eAAA,CAAAd,IAAA,CAAAM,OAAA,QAAAQ,eAAA,CAAAd,IAAA,CAAAkB,KAAA;MACA;MACA,KAAAO,MAAA,CAAAiB,IAAA,sBAAA5B,eAAA,CAAAd,IAAA,EACA2B,IAAA,WAAAC,GAAA;QACAmC,MAAA,CAAAF,WAAA;QACAE,MAAA,CAAA5C,eAAA,CAAAiD,YAAA;QACAL,MAAA,CAAAL,cAAA,CAAAK,MAAA,CAAA5C,eAAA;MACA;IACA;IACA;IACAkD,YAAA,WAAAA,aAAAtD,QAAA,EAAAF,SAAA;MACA,KAAAC,eAAA,CAAAd,IAAA,CAAAe,QAAA,GAAAA,QAAA;MACA,KAAAD,eAAA,CAAAd,IAAA,CAAAiB,WAAA,GAAAJ,SAAA,CAAAR,EAAA;MACA,KAAAS,eAAA,CAAAd,IAAA,CAAAkB,KAAA,OAAA0C,MAAA,CAAA/C,SAAA,CAAAH,QAAA;MACA,KAAAmC,KAAA,CAAAyB,YAAA,CAAAC,KAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAjD,gBAAA,MAAAnC,KAAA;EACA;AACA","ignoreList":[]}]}