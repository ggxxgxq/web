{"remainingRequest":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/babel-loader/lib/index.js!/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/src/views/article/Editor.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/src/views/article/Editor.vue","mtime":1712587400026},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/babel.config.js","mtime":1712587400021},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/cache-loader/dist/cjs.js","mtime":1712590523146},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/babel-loader/lib/index.js","mtime":1712590523266},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/cache-loader/dist/cjs.js","mtime":1712590523146},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/vue-loader/lib/index.js","mtime":1712590523434}],"contextDependencies":[],"result":["export default {\n  name: 'Editor',\n  data: function data() {\n    return {\n      articleInfoModal: {\n        show: false,\n        loading: false\n      },\n      tag: '',\n      tags: [],\n      articleCategory: [{\n        name: '测试类别',\n        code: '-1'\n      }],\n      articleAddForm: {\n        articleCategory: '',\n        title: '',\n        brief: '',\n        cover: 'http://img.angus-liu.cn/avatar/avatar01.jpg',\n        tags: '',\n        markdownContent: '',\n        htmlContent: ''\n      }\n    };\n  },\n  methods: {\n    // 获取文章类别\n    getArticleCategory: function getArticleCategory() {\n      var _this = this;\n      this.$axios.get('/api/dic/item', {\n        dicTypeCode: 'article-category'\n      }).then(function (res) {\n        var result = res.data;\n        _this.articleCategory = result.data;\n      });\n    },\n    // 编辑器内容变化\n    contentChange: function contentChange(value, render) {\n      this.articleAddForm.markdownContent = value;\n      this.articleAddForm.htmlContent = render;\n    },\n    // 保存草稿\n    saveArticle: function saveArticle(value, render) {\n      console.log('保存草稿');\n    },\n    // 添加图片\n    imgAdd: function imgAdd(pos, img) {\n      var _this2 = this;\n      // 第一步.将图片上传到服务器.\n      var formData = new FormData();\n      formData.append('type', 'img');\n      formData.append('file', img);\n      this.$axios.post('/api/local-storage/upload', formData).then(function (res) {\n        var result = res.data;\n        _this2.$refs.editor.$img2Url(pos, result.data.url);\n      });\n    },\n    // 添加标签\n    addTag: function addTag() {\n      this.tags.push(this.tag);\n      this.tag = '';\n    },\n    removeTag: function removeTag(event, name) {\n      var index = this.tags.indexOf(name);\n      this.tags.splice(index, 1);\n    },\n    submitArticle: function submitArticle() {\n      var _this3 = this;\n      this.articleInfoModal.loading = true;\n      this.articleAddForm.tags = JSON.stringify(this.tags);\n      this.$axios.post('/api/article', this.articleAddForm).then(function (res) {\n        _this3.articleInfoModal.show = false;\n        _this3.articleInfoModal.loading = false;\n        _this3.$Notice.success({\n          title: 'Bingo',\n          desc: '发布成功'\n        });\n        _this3.$router.push('/');\n      }).catch(function (error) {\n        _this3.articleInfoModal.loading = false;\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.getArticleCategory();\n  }\n};",{"version":3,"names":["name","data","articleInfoModal","show","loading","tag","tags","articleCategory","code","articleAddForm","title","brief","cover","markdownContent","htmlContent","methods","getArticleCategory","_this","$axios","get","dicTypeCode","then","res","result","contentChange","value","render","saveArticle","console","log","imgAdd","pos","img","_this2","formData","FormData","append","post","$refs","editor","$img2Url","url","addTag","push","removeTag","event","index","indexOf","splice","submitArticle","_this3","JSON","stringify","$Notice","success","desc","$router","catch","error","mounted"],"sources":["src/views/article/Editor.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <!-- 标题 -->\n    <div class=\"article-info-title\">\n      <Input v-model=\"articleAddForm.title\" placeholder=\"输入文章标题\" size=\"large\" style=\"z-index: 1\">\n        <template #append>\n          <Button icon=\"md-create\" @click=\"articleInfoModal.show = true\">提交</Button>\n        </template>\n      </Input>\n    </div>\n    <!-- 标题 END -->\n    <!-- 文章信息模态框 -->\n    <Modal v-model=\"articleInfoModal.show\" title=\"文章信息\" :mask-closable=\"false\" :width=\"600\" scrollable>\n      <Row>\n        <iCol span=\"8\">\n          <sui-image :src=\"articleAddForm.cover\" size=\"medium\" rounded/>\n          <Upload action=\"//jsonplaceholder.typicode.com/posts/\">\n            <Button icon=\"ios-cloud-upload-outline\">上传文章封面</Button>\n          </Upload>\n        </iCol>\n        <iCol span=\"16\">\n          <div class=\"article-info-row\">\n            <Select v-model=\"articleAddForm.articleCategory\" placeholder=\"请选择文章类别\" size=\"large\">\n              <Option v-for=\"item in articleCategory\" :key=\"item.name\" :value=\"item.name\" :label=\"item.name\"/>\n            </Select>\n          </div>\n          <div class=\"article-info-row\">\n            <Input type=\"textarea\" v-model=\"articleAddForm.brief\" size=\"large\" :autosize=\"{minRows: 5,maxRows: 10}\"\n                   placeholder=\"请输入文章简介\"/>\n          </div>\n          <div class=\"article-info-row\">\n            <Input class=\"article-info-tag\" prefix=\"ios-bookmark-outline\" v-model=\"tag\" placeholder=\"添加标签\"\n                   @on-enter=\"addTag\"/>\n            <Tag class=\"article-info-tag\" v-for=\"(item, index) in tags\" :key=\"index\" :name=\"item\"\n                 @on-close=\"removeTag\" closable type=\"dot\" color=\"primary\">\n              {{item}}\n            </Tag>\n          </div>\n        </iCol>\n      </Row>\n      <template #footer>\n        <Button type=\"text\" @click=\"articleInfoModal.show = false\">取消</Button>\n        <Button type=\"primary\" @click=\"submitArticle\" :loading=\"articleInfoModal.loading\">确认提交</Button>\n      </template>\n    </Modal>\n    <!-- 文章信息模态框 END -->\n    <!-- 编辑器 -->\n    <mavon-editor class=\"editor\" ref=editor v-model=\"articleAddForm.markdownContent\"\n                  @change=\"contentChange\" @imgAdd=\"imgAdd\" :boxShadow=\"false\"/>\n    <!-- 编辑器 END -->\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Editor',\n  data() {\n    return {\n      articleInfoModal: {\n        show: false,\n        loading: false\n      },\n      tag: '',\n      tags: [],\n      articleCategory: [{\n        name: '测试类别',\n        code: '-1'\n      }],\n      articleAddForm: {\n        articleCategory: '',\n        title: '',\n        brief: '',\n        cover: 'http://img.angus-liu.cn/avatar/avatar01.jpg',\n        tags: '',\n        markdownContent: '',\n        htmlContent: ''\n      }\n    };\n  },\n  methods: {\n    // 获取文章类别\n    getArticleCategory() {\n      this.$axios.get('/api/dic/item', { dicTypeCode: 'article-category' })\n        .then(res => {\n          let result = res.data;\n          this.articleCategory = result.data;\n        })\n    },\n    // 编辑器内容变化\n    contentChange(value, render) {\n      this.articleAddForm.markdownContent = value;\n      this.articleAddForm.htmlContent = render;\n    },\n    // 保存草稿\n    saveArticle(value, render) {\n      console.log('保存草稿');\n    },\n    // 添加图片\n    imgAdd(pos, img){\n      // 第一步.将图片上传到服务器.\n      let formData = new FormData();\n      formData.append('type', 'img');\n      formData.append('file', img);\n      this.$axios.post('/api/local-storage/upload', formData)\n        .then(res => {\n        let result = res.data;\n        this.$refs.editor.$img2Url(pos, result.data.url);\n      })\n    },\n    // 添加标签\n    addTag() {\n      this.tags.push(this.tag);\n      this.tag = '';\n    },\n    removeTag(event, name) {\n      const index = this.tags.indexOf(name);\n      this.tags.splice(index, 1);\n    },\n    submitArticle() {\n      this.articleInfoModal.loading = true;\n      this.articleAddForm.tags = JSON.stringify(this.tags);\n      this.$axios.post('/api/article', this.articleAddForm)\n        .then(res => {\n          this.articleInfoModal.show = false;\n          this.articleInfoModal.loading = false;\n          this.$Notice.success({ title: 'Bingo', desc: '发布成功' });\n          this.$router.push('/');\n        })\n        .catch(error => {\n          this.articleInfoModal.loading = false;\n        });\n    }\n  },\n  mounted() {\n    this.getArticleCategory();\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.container {\n  height: 100%;\n  width: 1260px;\n  margin: 20px auto;\n\n  .article-info-title {\n    margin-bottom: 7px;\n  }\n\n  .editor {\n    height: 780px;\n    z-index: 1;\n  }\n\n  .fullscreen {\n    height: 100%;\n    z-index: 100;\n  }\n}\n\n.article-info-row {\n  margin-bottom: 10px;\n\n  .article-info-tag {\n    margin-bottom: 5px;\n  }\n}\n</style>\n"],"mappings":"AAsDA;EACAA,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,gBAAA;QACAC,IAAA;QACAC,OAAA;MACA;MACAC,GAAA;MACAC,IAAA;MACAC,eAAA;QACAP,IAAA;QACAQ,IAAA;MACA;MACAC,cAAA;QACAF,eAAA;QACAG,KAAA;QACAC,KAAA;QACAC,KAAA;QACAN,IAAA;QACAO,eAAA;QACAC,WAAA;MACA;IACA;EACA;EACAC,OAAA;IACA;IACAC,kBAAA,WAAAA,mBAAA;MAAA,IAAAC,KAAA;MACA,KAAAC,MAAA,CAAAC,GAAA;QAAAC,WAAA;MAAA,GACAC,IAAA,WAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAArB,IAAA;QACAgB,KAAA,CAAAV,eAAA,GAAAgB,MAAA,CAAAtB,IAAA;MACA;IACA;IACA;IACAuB,aAAA,WAAAA,cAAAC,KAAA,EAAAC,MAAA;MACA,KAAAjB,cAAA,CAAAI,eAAA,GAAAY,KAAA;MACA,KAAAhB,cAAA,CAAAK,WAAA,GAAAY,MAAA;IACA;IACA;IACAC,WAAA,WAAAA,YAAAF,KAAA,EAAAC,MAAA;MACAE,OAAA,CAAAC,GAAA;IACA;IACA;IACAC,MAAA,WAAAA,OAAAC,GAAA,EAAAC,GAAA;MAAA,IAAAC,MAAA;MACA;MACA,IAAAC,QAAA,OAAAC,QAAA;MACAD,QAAA,CAAAE,MAAA;MACAF,QAAA,CAAAE,MAAA,SAAAJ,GAAA;MACA,KAAAd,MAAA,CAAAmB,IAAA,8BAAAH,QAAA,EACAb,IAAA,WAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAArB,IAAA;QACAgC,MAAA,CAAAK,KAAA,CAAAC,MAAA,CAAAC,QAAA,CAAAT,GAAA,EAAAR,MAAA,CAAAtB,IAAA,CAAAwC,GAAA;MACA;IACA;IACA;IACAC,MAAA,WAAAA,OAAA;MACA,KAAApC,IAAA,CAAAqC,IAAA,MAAAtC,GAAA;MACA,KAAAA,GAAA;IACA;IACAuC,SAAA,WAAAA,UAAAC,KAAA,EAAA7C,IAAA;MACA,IAAA8C,KAAA,QAAAxC,IAAA,CAAAyC,OAAA,CAAA/C,IAAA;MACA,KAAAM,IAAA,CAAA0C,MAAA,CAAAF,KAAA;IACA;IACAG,aAAA,WAAAA,cAAA;MAAA,IAAAC,MAAA;MACA,KAAAhD,gBAAA,CAAAE,OAAA;MACA,KAAAK,cAAA,CAAAH,IAAA,GAAA6C,IAAA,CAAAC,SAAA,MAAA9C,IAAA;MACA,KAAAY,MAAA,CAAAmB,IAAA,sBAAA5B,cAAA,EACAY,IAAA,WAAAC,GAAA;QACA4B,MAAA,CAAAhD,gBAAA,CAAAC,IAAA;QACA+C,MAAA,CAAAhD,gBAAA,CAAAE,OAAA;QACA8C,MAAA,CAAAG,OAAA,CAAAC,OAAA;UAAA5C,KAAA;UAAA6C,IAAA;QAAA;QACAL,MAAA,CAAAM,OAAA,CAAAb,IAAA;MACA,GACAc,KAAA,WAAAC,KAAA;QACAR,MAAA,CAAAhD,gBAAA,CAAAE,OAAA;MACA;IACA;EACA;EACAuD,OAAA,WAAAA,QAAA;IACA,KAAA3C,kBAAA;EACA;AACA","ignoreList":[]}]}