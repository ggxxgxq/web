{"remainingRequest":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/babel-loader/lib/index.js!/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/src/views/article/Article.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/src/views/article/Article.vue","mtime":1712673875665},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/babel.config.js","mtime":1712587400021},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/cache-loader/dist/cjs.js","mtime":1712590523146},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/babel-loader/lib/index.js","mtime":1712590523266},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/cache-loader/dist/cjs.js","mtime":1712590523146},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/vue-loader/lib/index.js","mtime":1712590523434}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray.js\";\nexport default {\n  name: 'Article',\n  data: function data() {\n    return {\n      activeArticleCategory: '所有',\n      articleCategory: [{\n        'name': '测试',\n        'code': '-1'\n      }],\n      param: {\n        // query 参数\n        articleCategory: null,\n        general: null,\n        // page & order 参数\n        desc: 'create_time',\n        current: 1\n      },\n      articlePage: {\n        'records': [{\n          'id': -1,\n          'userId': -1,\n          'resourceId': -1,\n          'articleCategory': '测试文章',\n          'title': '测试标题',\n          'brief': '测试标题',\n          'createTime': '2024-05-13',\n          'user': {\n            'id': -1,\n            'username': 'anonymous',\n            'nickname': '游客',\n            'avatar': require(\"../../assets/img/avatar/anonymous-avatar.jpg\"),\n            'sex': '保密',\n            'sign': '一句话介绍自己'\n          },\n          'resource': {\n            'id': -1,\n            'zanCount': 0,\n            'pvCount': 0,\n            'commentCount': 0\n          }\n        }],\n        'total': 7,\n        'size': 10,\n        'current': 1,\n        'searchCount': true,\n        'pages': 1\n      }\n    };\n  },\n  methods: {\n    // 类别切换\n    selectCategory: function selectCategory(articleCategory) {\n      this.activeArticleCategory = articleCategory;\n      if (articleCategory === '所有') {\n        this.param.articleCategory = null;\n      } else {\n        this.param.articleCategory = articleCategory;\n      }\n      this.param.current = 1;\n      this.getArticlePage(this.param);\n    },\n    // 获取文章类别\n    getArticleCategory: function getArticleCategory() {\n      var _this = this;\n      this.$axios.get('/api/dic/item', {\n        dicTypeCode: 'article-category'\n      }).then(function (res) {\n        var result = res.data;\n        _this.articleCategory = result.data;\n      });\n    },\n    // 获取文章分页\n    getArticlePage: function getArticlePage(param) {\n      var _this2 = this;\n      this.$axios.get('/api/article/page', param).then(function (res) {\n        var result = res.data;\n        _this2.articlePage = result.data;\n      });\n    },\n    // 加载更多\n    loadMore: function loadMore() {\n      var _this3 = this;\n      this.param.current++;\n      this.$axios.get('/api/article/page', this.param).then(function (res) {\n        var _this3$articlePage$re;\n        var result = res.data;\n        var morePage = result.data;\n        (_this3$articlePage$re = _this3.articlePage.records).push.apply(_this3$articlePage$re, _toConsumableArray(morePage.records));\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.getArticleCategory();\n    this.getArticlePage(this.param);\n  }\n};",{"version":3,"names":["name","data","activeArticleCategory","articleCategory","param","general","desc","current","articlePage","require","methods","selectCategory","getArticlePage","getArticleCategory","_this","$axios","get","dicTypeCode","then","res","result","_this2","loadMore","_this3","_this3$articlePage$re","morePage","records","push","apply","_toConsumableArray","mounted"],"sources":["src/views/article/Article.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <Row class=\"article-menu\">\n      <iCol class=\"article-category\" span=\"18\">\n        <a is=\"sui-label\" v-if=\"activeArticleCategory === '所有'\" color=\"teal\" @click=\"selectCategory('所有')\">\n          所有\n        </a>\n        <a is=\"sui-label\" v-else @click=\"selectCategory('所有')\">所有</a>\n        <template v-for=\"item in articleCategory\">\n          <a is=\"sui-label\" v-if=\"activeArticleCategory === item.name\" color=\"teal\"\n             @click=\"selectCategory(item.name)\">{{item.name}}</a>\n          <a is=\"sui-label\" v-else @click=\"selectCategory(item.name)\">{{item.name}}</a>\n        </template>\n      </iCol>\n      <iCol span=\"6\">\n        <sui-input class=\"fluid\" placeholder=\"搜索文章\" icon=\"search\"\n                   v-model=\"param.general\" @keydown.enter=\"getArticlePage(param)\"/>\n      </iCol>\n    </Row>\n    <Row>\n      <iCol>\n        <sui-card class=\"fluid\">\n          <sui-card-content>\n            <sui-feed class=\"article-feed\">\n              <sui-feed-event v-for=\"article in articlePage.records\" :key=\"article.id\">\n                <sui-feed-label :image=\"article.user.avatar\"/>\n                <sui-feed-content>\n                  <sui-feed-summary>\n                    <router-link :to=\"'/user/' + article.user.id\">{{article.user.nickname}}</router-link>\n                    发表{{article.articleCategory}}\n                    <router-link :to=\"'/article/' + article.id\">{{article.title}}</router-link>\n                    <sui-feed-date>\n                      <Time :time=\"article.createTime\"/>\n                    </sui-feed-date>\n                  </sui-feed-summary>\n                  <sui-feed-extra text class=\"article-brief\">\n                    {{article.brief}}\n                  </sui-feed-extra>\n                  <sui-feed-meta>\n                    <sui-feed-like>\n                      👍 {{article.resource.zanCount}}\n                    </sui-feed-like>\n                    <sui-feed-like>\n                      💬 {{article.resource.commentCount}}\n                    </sui-feed-like>\n                  </sui-feed-meta>\n                </sui-feed-content>\n              </sui-feed-event>\n            </sui-feed>\n          </sui-card-content>\n        </sui-card>\n        <sui-button basic content=\"加载更多\" @click=\"loadMore\"\n                    :disabled=\"param.current >= articlePage.pages\"/>\n      </iCol>\n    </Row>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Article',\n  data() {\n    return {\n      activeArticleCategory: '所有',\n      articleCategory: [{\n        'name': '测试',\n        'code': '-1'\n      }],\n      param: {\n        // query 参数\n        articleCategory: null,\n        general: null,\n        // page & order 参数\n        desc: 'create_time',\n        current: 1\n      },\n      articlePage: {\n        'records': [{\n          'id': -1,\n          'userId': -1,\n          'resourceId': -1,\n          'articleCategory': '测试文章',\n          'title': '测试标题',\n          'brief': '测试标题',\n          'createTime': '2024-05-13',\n          'user': {\n            'id': -1,\n            'username': 'anonymous',\n            'nickname': '游客',\n            'avatar': require('../../assets/img/avatar/anonymous-avatar.jpg'),\n            'sex': '保密',\n            'sign': '一句话介绍自己'\n          },\n          'resource': {\n            'id': -1,\n            'zanCount': 0,\n            'pvCount': 0,\n            'commentCount': 0\n          }\n        }],\n        'total': 7,\n        'size': 10,\n        'current': 1,\n        'searchCount': true,\n        'pages': 1\n      },\n    }\n  },\n  methods: {\n    // 类别切换\n    selectCategory(articleCategory) {\n      this.activeArticleCategory = articleCategory;\n      if (articleCategory === '所有') {\n        this.param.articleCategory = null;\n      } else {\n        this.param.articleCategory = articleCategory;\n      }\n      this.param.current = 1;\n      this.getArticlePage(this.param);\n    },\n    // 获取文章类别\n    getArticleCategory() {\n      this.$axios.get('/api/dic/item', { dicTypeCode: 'article-category' })\n        .then(res => {\n          let result = res.data;\n          this.articleCategory = result.data;\n        })\n    },\n    // 获取文章分页\n    getArticlePage(param) {\n      this.$axios.get('/api/article/page', param)\n        .then(res => {\n          let result = res.data;\n          this.articlePage = result.data;\n        });\n    },\n    // 加载更多\n    loadMore() {\n      this.param.current++;\n      this.$axios.get('/api/article/page', this.param)\n        .then(res => {\n          let result = res.data;\n          let morePage = result.data;\n          this.articlePage.records.push(...morePage.records);\n        });\n    },\n  },\n  mounted() {\n    this.getArticleCategory();\n    this.getArticlePage(this.param);\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.container {\n  width: 1140px;\n  margin: 5px auto;\n\n  .ivu-col {\n    padding: 7px;\n  }\n\n  .article-menu {\n    .article-category {\n      .label {\n        padding: 12px 15px;\n        font-size: 1em;\n        margin: 0 7px 7px 0;\n      }\n    }\n  }\n\n  .ui.feed > .event > .content .extra.text {\n    max-width: 700px;\n  }\n}\n</style>\n"],"mappings":";AA2DA;EACAA,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,qBAAA;MACAC,eAAA;QACA;QACA;MACA;MACAC,KAAA;QACA;QACAD,eAAA;QACAE,OAAA;QACA;QACAC,IAAA;QACAC,OAAA;MACA;MACAC,WAAA;QACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;YACA;YACA;YACA;YACA,UAAAC,OAAA;YACA;YACA;UACA;UACA;YACA;YACA;YACA;YACA;UACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;EACA;EACAC,OAAA;IACA;IACAC,cAAA,WAAAA,eAAAR,eAAA;MACA,KAAAD,qBAAA,GAAAC,eAAA;MACA,IAAAA,eAAA;QACA,KAAAC,KAAA,CAAAD,eAAA;MACA;QACA,KAAAC,KAAA,CAAAD,eAAA,GAAAA,eAAA;MACA;MACA,KAAAC,KAAA,CAAAG,OAAA;MACA,KAAAK,cAAA,MAAAR,KAAA;IACA;IACA;IACAS,kBAAA,WAAAA,mBAAA;MAAA,IAAAC,KAAA;MACA,KAAAC,MAAA,CAAAC,GAAA;QAAAC,WAAA;MAAA,GACAC,IAAA,WAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAAlB,IAAA;QACAa,KAAA,CAAAX,eAAA,GAAAiB,MAAA,CAAAnB,IAAA;MACA;IACA;IACA;IACAW,cAAA,WAAAA,eAAAR,KAAA;MAAA,IAAAiB,MAAA;MACA,KAAAN,MAAA,CAAAC,GAAA,sBAAAZ,KAAA,EACAc,IAAA,WAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAAlB,IAAA;QACAoB,MAAA,CAAAb,WAAA,GAAAY,MAAA,CAAAnB,IAAA;MACA;IACA;IACA;IACAqB,QAAA,WAAAA,SAAA;MAAA,IAAAC,MAAA;MACA,KAAAnB,KAAA,CAAAG,OAAA;MACA,KAAAQ,MAAA,CAAAC,GAAA,2BAAAZ,KAAA,EACAc,IAAA,WAAAC,GAAA;QAAA,IAAAK,qBAAA;QACA,IAAAJ,MAAA,GAAAD,GAAA,CAAAlB,IAAA;QACA,IAAAwB,QAAA,GAAAL,MAAA,CAAAnB,IAAA;QACA,CAAAuB,qBAAA,GAAAD,MAAA,CAAAf,WAAA,CAAAkB,OAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAJ,qBAAA,EAAAK,kBAAA,CAAAJ,QAAA,CAAAC,OAAA;MACA;IACA;EACA;EACAI,OAAA,WAAAA,QAAA;IACA,KAAAjB,kBAAA;IACA,KAAAD,cAAA,MAAAR,KAAA;EACA;AACA","ignoreList":[]}]}