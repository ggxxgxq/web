{"remainingRequest":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/babel-loader/lib/index.js!/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/src/utils/axios.js","dependencies":[{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/src/utils/axios.js","mtime":1712587400025},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/babel.config.js","mtime":1712587400021},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/cache-loader/dist/cjs.js","mtime":1712590523146},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/babel-loader/lib/index.js","mtime":1712590523266}],"contextDependencies":[],"result":["import _classCallCheck from \"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/@babel/runtime-corejs2/helpers/esm/createClass.js\";\nimport axios from 'axios';\nimport Log from \"./log\";\nimport { Notice } from 'iview';\nimport store from \"../store\";\n\n// 自定义日志工具\nvar log = new Log('src/utils/axios.js');\nvar HttpRequest = /*#__PURE__*/function () {\n  function HttpRequest() {\n    _classCallCheck(this, HttpRequest);\n  }\n  return _createClass(HttpRequest, [{\n    key: \"interceptors\",\n    value: function interceptors(instance, url) {\n      // 请求拦截\n      instance.interceptors.request.use(function (config) {\n        // 打印请求参数\n        var method = config.method,\n          params = config.params,\n          data = config.data;\n        log.info('Request --->');\n        log.info('Method', method);\n        log.info('URL', url);\n        log.info('Params', params);\n        log.info('Data', data);\n        return config;\n      }, function (error) {\n        return Promise.reject(error);\n      });\n      // 响应拦截\n      instance.interceptors.response.use(function (res) {\n        var status = res.status,\n          data = res.data;\n        // 打印响应参数\n        log.info('Success Response <---');\n        log.info('URL', url);\n        log.info('Status', status);\n        log.info('Data', data);\n        return {\n          status: status,\n          data: data\n        };\n      }, function (error) {\n        var _error$response = error.response,\n          status = _error$response.status,\n          data = _error$response.data;\n        log.info('Error Response <---');\n        log.info('URL', url);\n        log.info('Status', status);\n        log.info('Data', data);\n        switch (status) {\n          case 400:\n            log.info('业务异常');\n            break;\n          case 401:\n            log.info('认证异常');\n            store.commit('userUpdate', null);\n            break;\n          case 403:\n            log.info('权限不足');\n            break;\n          case 500:\n            log.info('服务端异常');\n            break;\n          default:\n        }\n        Notice.error({\n          title: 'OOPS',\n          desc: data.msg\n        });\n        return Promise.reject(error);\n      });\n    }\n  }, {\n    key: \"request\",\n    value: function request(options) {\n      var instance = axios.create();\n      this.interceptors(instance, options.url);\n      return instance(options);\n    }\n  }, {\n    key: \"get\",\n    value: function get(url, params) {\n      return this.request({\n        method: 'get',\n        url: url,\n        params: params\n      });\n    }\n  }, {\n    key: \"post\",\n    value: function post(url, data) {\n      return this.request({\n        method: 'post',\n        url: url,\n        data: data\n      });\n    }\n  }, {\n    key: \"put\",\n    value: function put(url, data) {\n      return this.request({\n        method: 'put',\n        url: url,\n        data: data\n      });\n    }\n  }]);\n}();\nexport default new HttpRequest();",{"version":3,"names":["axios","Log","Notice","store","log","HttpRequest","_classCallCheck","_createClass","key","value","interceptors","instance","url","request","use","config","method","params","data","info","error","Promise","reject","response","res","status","_error$response","commit","title","desc","msg","options","create","get","post","put"],"sources":["/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/src/utils/axios.js"],"sourcesContent":["import axios from 'axios';\nimport Log from './log';\nimport { Notice } from 'iview';\nimport store from '../store'\n\n// 自定义日志工具\nconst log = new Log('src/utils/axios.js');\n\nclass HttpRequest {\n  interceptors(instance, url) {\n    // 请求拦截\n    instance.interceptors.request.use(config => {\n      // 打印请求参数\n      const { method, params, data } = config;\n      log.info('Request --->');\n      log.info('Method', method);\n      log.info('URL', url);\n      log.info('Params', params);\n      log.info('Data', data);\n\n      return config;\n    }, error => {\n      return Promise.reject(error);\n    });\n    // 响应拦截\n    instance.interceptors.response\n      .use(res => {\n        const { status, data } = res;\n        // 打印响应参数\n        log.info('Success Response <---');\n        log.info('URL', url);\n        log.info('Status', status);\n        log.info('Data', data);\n        return { status, data };\n\n      }, error => {\n        const { status, data } = error.response;\n        log.info('Error Response <---');\n        log.info('URL', url);\n        log.info('Status', status);\n        log.info('Data', data);\n\n        switch (status) {\n          case 400:\n            log.info('业务异常');\n            break;\n          case 401:\n            log.info('认证异常');\n            store.commit('userUpdate', null);\n            break;\n          case 403:\n            log.info('权限不足');\n            break;\n          case 500:\n            log.info('服务端异常');\n            break;\n          default:\n        }\n\n        Notice.error({ title: 'OOPS', desc: data.msg });\n\n        return Promise.reject(error);\n      });\n  }\n\n  request(options) {\n    const instance = axios.create();\n    this.interceptors(instance, options.url);\n    return instance(options);\n  }\n\n  get(url, params) {\n    return this.request({\n      method: 'get',\n      url,\n      params\n    });\n  }\n\n  post(url, data) {\n    return this.request({\n      method: 'post',\n      url,\n      data\n    });\n  }\n\n  put(url, data) {\n    return this.request({\n      method: 'put',\n      url,\n      data\n    });\n  }\n}\n\nexport default new HttpRequest();\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,GAAG;AACV,SAASC,MAAM,QAAQ,OAAO;AAC9B,OAAOC,KAAK;;AAEZ;AACA,IAAMC,GAAG,GAAG,IAAIH,GAAG,CAAC,oBAAoB,CAAC;AAAC,IAEpCI,WAAW;EAAA,SAAAA,YAAA;IAAAC,eAAA,OAAAD,WAAA;EAAA;EAAA,OAAAE,YAAA,CAAAF,WAAA;IAAAG,GAAA;IAAAC,KAAA,EACf,SAAAC,aAAaC,QAAQ,EAAEC,GAAG,EAAE;MAC1B;MACAD,QAAQ,CAACD,YAAY,CAACG,OAAO,CAACC,GAAG,CAAC,UAAAC,MAAM,EAAI;QAC1C;QACA,IAAQC,MAAM,GAAmBD,MAAM,CAA/BC,MAAM;UAAEC,MAAM,GAAWF,MAAM,CAAvBE,MAAM;UAAEC,IAAI,GAAKH,MAAM,CAAfG,IAAI;QAC5Bd,GAAG,CAACe,IAAI,CAAC,cAAc,CAAC;QACxBf,GAAG,CAACe,IAAI,CAAC,QAAQ,EAAEH,MAAM,CAAC;QAC1BZ,GAAG,CAACe,IAAI,CAAC,KAAK,EAAEP,GAAG,CAAC;QACpBR,GAAG,CAACe,IAAI,CAAC,QAAQ,EAAEF,MAAM,CAAC;QAC1Bb,GAAG,CAACe,IAAI,CAAC,MAAM,EAAED,IAAI,CAAC;QAEtB,OAAOH,MAAM;MACf,CAAC,EAAE,UAAAK,KAAK,EAAI;QACV,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;MAC9B,CAAC,CAAC;MACF;MACAT,QAAQ,CAACD,YAAY,CAACa,QAAQ,CAC3BT,GAAG,CAAC,UAAAU,GAAG,EAAI;QACV,IAAQC,MAAM,GAAWD,GAAG,CAApBC,MAAM;UAAEP,IAAI,GAAKM,GAAG,CAAZN,IAAI;QACpB;QACAd,GAAG,CAACe,IAAI,CAAC,uBAAuB,CAAC;QACjCf,GAAG,CAACe,IAAI,CAAC,KAAK,EAAEP,GAAG,CAAC;QACpBR,GAAG,CAACe,IAAI,CAAC,QAAQ,EAAEM,MAAM,CAAC;QAC1BrB,GAAG,CAACe,IAAI,CAAC,MAAM,EAAED,IAAI,CAAC;QACtB,OAAO;UAAEO,MAAM,EAANA,MAAM;UAAEP,IAAI,EAAJA;QAAK,CAAC;MAEzB,CAAC,EAAE,UAAAE,KAAK,EAAI;QACV,IAAAM,eAAA,GAAyBN,KAAK,CAACG,QAAQ;UAA/BE,MAAM,GAAAC,eAAA,CAAND,MAAM;UAAEP,IAAI,GAAAQ,eAAA,CAAJR,IAAI;QACpBd,GAAG,CAACe,IAAI,CAAC,qBAAqB,CAAC;QAC/Bf,GAAG,CAACe,IAAI,CAAC,KAAK,EAAEP,GAAG,CAAC;QACpBR,GAAG,CAACe,IAAI,CAAC,QAAQ,EAAEM,MAAM,CAAC;QAC1BrB,GAAG,CAACe,IAAI,CAAC,MAAM,EAAED,IAAI,CAAC;QAEtB,QAAQO,MAAM;UACZ,KAAK,GAAG;YACNrB,GAAG,CAACe,IAAI,CAAC,MAAM,CAAC;YAChB;UACF,KAAK,GAAG;YACNf,GAAG,CAACe,IAAI,CAAC,MAAM,CAAC;YAChBhB,KAAK,CAACwB,MAAM,CAAC,YAAY,EAAE,IAAI,CAAC;YAChC;UACF,KAAK,GAAG;YACNvB,GAAG,CAACe,IAAI,CAAC,MAAM,CAAC;YAChB;UACF,KAAK,GAAG;YACNf,GAAG,CAACe,IAAI,CAAC,OAAO,CAAC;YACjB;UACF;QACF;QAEAjB,MAAM,CAACkB,KAAK,CAAC;UAAEQ,KAAK,EAAE,MAAM;UAAEC,IAAI,EAAEX,IAAI,CAACY;QAAI,CAAC,CAAC;QAE/C,OAAOT,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;MAC9B,CAAC,CAAC;IACN;EAAC;IAAAZ,GAAA;IAAAC,KAAA,EAED,SAAAI,QAAQkB,OAAO,EAAE;MACf,IAAMpB,QAAQ,GAAGX,KAAK,CAACgC,MAAM,CAAC,CAAC;MAC/B,IAAI,CAACtB,YAAY,CAACC,QAAQ,EAAEoB,OAAO,CAACnB,GAAG,CAAC;MACxC,OAAOD,QAAQ,CAACoB,OAAO,CAAC;IAC1B;EAAC;IAAAvB,GAAA;IAAAC,KAAA,EAED,SAAAwB,IAAIrB,GAAG,EAAEK,MAAM,EAAE;MACf,OAAO,IAAI,CAACJ,OAAO,CAAC;QAClBG,MAAM,EAAE,KAAK;QACbJ,GAAG,EAAHA,GAAG;QACHK,MAAM,EAANA;MACF,CAAC,CAAC;IACJ;EAAC;IAAAT,GAAA;IAAAC,KAAA,EAED,SAAAyB,KAAKtB,GAAG,EAAEM,IAAI,EAAE;MACd,OAAO,IAAI,CAACL,OAAO,CAAC;QAClBG,MAAM,EAAE,MAAM;QACdJ,GAAG,EAAHA,GAAG;QACHM,IAAI,EAAJA;MACF,CAAC,CAAC;IACJ;EAAC;IAAAV,GAAA;IAAAC,KAAA,EAED,SAAA0B,IAAIvB,GAAG,EAAEM,IAAI,EAAE;MACb,OAAO,IAAI,CAACL,OAAO,CAAC;QAClBG,MAAM,EAAE,KAAK;QACbJ,GAAG,EAAHA,GAAG;QACHM,IAAI,EAAJA;MACF,CAAC,CAAC;IACJ;EAAC;AAAA;AAGH,eAAe,IAAIb,WAAW,CAAC,CAAC","ignoreList":[]}]}