{"remainingRequest":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/babel-loader/lib/index.js!/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/src/components/common/Header.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/src/components/common/Header.vue","mtime":1712673873955},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/babel.config.js","mtime":1712587400021},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/cache-loader/dist/cjs.js","mtime":1712590523146},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/babel-loader/lib/index.js","mtime":1712590523266},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/cache-loader/dist/cjs.js","mtime":1712590523146},{"path":"/Users/gaoxiangqing/Documents/gaoxiangqing/smilcool/smilcool-client/node_modules/vue-loader/lib/index.js","mtime":1712590523434}],"contextDependencies":[],"result":["export default {\n  name: 'Header',\n  data: function data() {\n    return {\n      q: '',\n      logInOnModel: {\n        show: false,\n        title: '登录',\n        isLogin: true\n      },\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      logonForm: {\n        username: '',\n        email: '',\n        password: '',\n        rePassword: ''\n      },\n      rules: {},\n      showNotificationCard: false\n    };\n  },\n  computed: {\n    user: function user() {\n      return this.$store.state.user;\n    }\n  },\n  methods: {\n    showLoginForm: function showLoginForm() {\n      this.logInOnModel.title = '登录';\n      this.logInOnModel.isLogin = true;\n    },\n    showRegisterForm: function showRegisterForm() {\n      this.logInOnModel.title = '注册';\n      this.logInOnModel.isLogin = false;\n    },\n    showErrorNotice: function showErrorNotice(title, desc) {\n      this.$Notice.error({\n        title: title,\n        desc: desc\n      });\n    },\n    // 登录\n    login: function login() {\n      var _this = this;\n      if (this.loginForm.username.length === 0) {\n        this.showErrorNotice('登录失败', '请填写用户名或邮箱');\n      } else if (this.loginForm.password.length === 0) {\n        this.showErrorNotice('登录失败', '请填写密码');\n      } else {\n        // TODO 后期需要搬到 vuex\n        this.$axios.post('/api/user/login', this.loginForm).then(function (res) {\n          var result = res.data;\n          if (result.success) {\n            _this.logInOnModel.show = false;\n            // 保存到 vuex\n            _this.$store.commit('userUpdate', result.data);\n            _this.loginForm = {\n              username: '',\n              password: ''\n            };\n          }\n        });\n      }\n    },\n    // 注销\n    logout: function logout() {\n      var _this2 = this;\n      this.$axios.post('/api/user/logout').then(function (res) {\n        _this2.$store.commit('userUpdate', null);\n      });\n    },\n    // 注册\n    logon: function logon() {\n      var _this3 = this;\n      if (this.logonForm.username.length === 0) {\n        this.showErrorNotice('注册失败', '请填写用户名');\n      } else if (this.logonForm.email.length === 0 || !/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/.test(this.logonForm.email)) {\n        this.showErrorNotice('注册失败', '请填写合法的邮箱');\n      } else if (this.logonForm.password.length === 0 || this.logonForm.password !== this.logonForm.rePassword) {\n        this.showErrorNotice('注册失败', '两次输入的密码不一致');\n      } else {\n        // TODO 2024/6/6 后期需要搬到 vuex\n        this.$axios.post('/api/user/logon', this.logonForm).then(function (res) {\n          _this3.$Notice.success({\n            title: 'Bingo',\n            desc: '注册成功'\n          });\n          _this3.showLoginForm();\n        });\n      }\n    },\n    // 第三方登录\n    oauth: function oauth() {\n      this.$Notice.warning({\n        title: 'Hey',\n        desc: '功能正在开发中 🚀'\n      });\n    },\n    // 全文搜索界面\n    toSearch: function toSearch() {\n      this.$router.push({\n        name: 'search',\n        query: {\n          q: this.q\n        }\n      });\n    },\n    // 消息中心\n    toMessage: function toMessage() {\n      this.showNotificationCard = false;\n      if (!this.$store.state.user) {\n        this.logInOnModel.show = true;\n      } else {\n        this.$router.push('/message');\n      }\n    }\n  },\n  mounted: function mounted() {\n    // TODO 2024/6/6 也可以在这里加载 WebSocket\n  }\n};",{"version":3,"names":["name","data","q","logInOnModel","show","title","isLogin","loginForm","username","password","logonForm","email","rePassword","rules","showNotificationCard","computed","user","$store","state","methods","showLoginForm","showRegisterForm","showErrorNotice","desc","$Notice","error","login","_this","length","$axios","post","then","res","result","success","commit","logout","_this2","logon","_this3","test","oauth","warning","toSearch","$router","push","query","toMessage","mounted"],"sources":["src/components/common/Header.vue"],"sourcesContent":["<template>\n  <div class=\"header-wrapper\">\n    <header>\n      <div class=\"container\">\n        <!-- LOGO -->\n        <router-link to=\"/\">\n          <img class=\"logo\" src=\"../../assets/img/logo/logo-5.png\">\n        </router-link>\n        <!-- LOGO END -->\n        <!-- 菜单 -->\n        <nav>\n          <ul>\n            <li>\n              <router-link to=\"/article\">文章资讯</router-link>\n            </li>\n            <li>\n              <router-link to=\"/moment\">校园动态</router-link>\n            </li>\n            <li>\n              <router-link to=\"/file\">文件仓库</router-link>\n            </li>\n            <li>\n              <router-link to=\"/second-hand\">二手交易</router-link>\n            </li>\n            <li>\n              <router-link to=\"/lost-found\">失物寻物</router-link>\n            </li>\n            <li>\n              <router-link to=\"/forum\">校内论坛</router-link>\n            </li>\n          </ul>\n        </nav>\n        <!-- 菜单 END -->\n        <!-- 头像 -->\n        <div class=\"avatar-wrapper\">\n          <Dropdown v-if=\"user\">\n            <sui-image class=\"avatar-img\" avatar :src=\"user.avatar\"/>\n            <DropdownMenu class=\"avatar-menu-list\" slot=\"list\">\n              <router-link :to=\" '/user/' + $store.state.user.id \">\n                <DropdownItem>\n                  <sui-icon name=\"user circle\"/>\n                  我的主页\n                </DropdownItem>\n              </router-link>\n              <router-link to=\"/article/editor\">\n                <DropdownItem>\n                  <sui-icon name=\"pencil alternate\"/>\n                  发表文章\n                </DropdownItem>\n              </router-link>\n              <DropdownItem>\n                <sui-icon name=\"star\"/>\n                收藏列表\n              </DropdownItem>\n              <DropdownItem>\n                <sui-icon name=\"key\"/>\n                账号管理\n              </DropdownItem>\n              <DropdownItem divided @click.native=\"logout\">\n                <sui-icon name=\"power off\"/>\n                退出登录\n              </DropdownItem>\n            </DropdownMenu>\n          </Dropdown>\n          <sui-image class=\"avatar-img\" v-else circular @click.native=\"logInOnModel.show = true\"\n                     :src=\"require('../../assets/img/avatar/anonymous-avatar.jpg')\"/>\n        </div>\n        <!-- 头像 END -->\n        <!-- 消息通知 -->\n        <div class=\"notification\" v-click-outside=\"() => { this.showNotificationCard = false }\">\n          <Badge dot>\n            <Icon type=\"ios-notifications-outline\" size=\"26\" @click=\"showNotificationCard = true\"/>\n          </Badge>\n          <div class=\"notification-card-wrapper\" v-show=\"showNotificationCard\">\n            <sui-card class=\"notification-card\">\n              <sui-button-group attached=\"top\" basic>\n                <sui-button>\n                  <Badge dot :offset=\"[0,-5]\">系统通知</Badge>\n                </sui-button>\n                <sui-button @click=\"toMessage\">\n                  <Badge dot :offset=\"[0,-5]\">消息中心</Badge>\n                </sui-button>\n              </sui-button-group>\n              <sui-card-content>\n                <sui-list class=\"notification-list\" divided>\n                  <sui-list-item v-for=\"i in 30\">\n                    <router-link to=\"\"><b>赫本</b></router-link>\n                    &nbsp;评论了&nbsp;\n                    <router-link to=\"\"><b>Markdown语法</b></router-link>\n                    &nbsp;<Time time=\"2024-05-31 12:10\"/>\n                  </sui-list-item>\n                </sui-list>\n              </sui-card-content>\n            </sui-card>\n          </div>\n        </div>\n        <!-- 消息通知 END -->\n        <!-- 搜索框 -->\n        <div class=\"ui search search-container\" @keydown.enter=\"toSearch\">\n          <div class=\"ui icon input\">\n            <input class=\"prompt\" v-model=\"q\" type=\"text\" placeholder=\"搜索校园资讯\">\n            <i class=\"search icon\"></i>\n          </div>\n          <div class=\"results\">\n            这里会显示推荐结果，暂时未做\n          </div>\n        </div>\n        <!-- 搜索框 END -->\n      </div>\n      <!-- 登录注册模态框 -->\n      <Modal class=\"login-on-modal\" v-model=\"logInOnModel.show\" :title=\"logInOnModel.title\" :mask-closable=\"false\"\n             width=\"320\" scrollable footer-hide :styles=\"{top: '20%'}\">\n        <!-- 登录表单 -->\n        <sui-form v-if=\"logInOnModel.isLogin\">\n          <sui-form-field>\n            <sui-input placeholder=\"请输入用户名或邮箱\" v-model=\"loginForm.username\"/>\n          </sui-form-field>\n          <sui-form-field>\n            <sui-input type=\"password\" placeholder=\"请输入密码\" v-model=\"loginForm.password\"/>\n          </sui-form-field>\n          <sui-form-field>\n            <sui-button fluid basic primary @click.prevent=\"login\">登录</sui-button>\n          </sui-form-field>\n          <sui-form-field>\n            <div style=\"color: #5c5c5c\">没有账号？<a @click=\"showRegisterForm\">注册</a>\n              <a style=\"float:right\" href=\"#\">忘记密码</a>\n            </div>\n          </sui-form-field>\n          <sui-form-field>\n            <div style=\"color: #5c5c5c\">第三方账号登录：</div>\n            <div class=\"oauth\">\n              <div class=\"oauth-bg\">\n                <img alt=\"微博\" src=\"../../assets/img/icon/weibo.svg\" @click=\"oauth\"></div>\n              <div class=\"oauth-bg\">\n                <img alt=\"微信\" src=\"../../assets/img/icon/wechat.svg\" @click=\"oauth\"></div>\n              <div class=\"oauth-bg\">\n                <img alt=\"GitHub\" src=\"../../assets/img/icon/github.svg\" @click=\"oauth\"></div>\n            </div>\n          </sui-form-field>\n        </sui-form>\n        <!-- 注册表单 -->\n        <sui-form v-else>\n          <sui-form-field>\n            <sui-input placeholder=\"请输入用户名\" v-model=\"logonForm.username\"/>\n          </sui-form-field>\n          <sui-form-field>\n            <sui-input type=\"email\" placeholder=\"请输入邮箱\" v-model=\"logonForm.email\"/>\n          </sui-form-field>\n          <sui-form-field>\n            <sui-input type=\"password\" placeholder=\"请输入密码\" v-model=\"logonForm.password\"/>\n          </sui-form-field>\n          <sui-form-field>\n            <sui-input type=\"password\" placeholder=\"请确认密码\" v-model=\"logonForm.rePassword\"/>\n          </sui-form-field>\n          <sui-form-field>\n            <sui-button style=\"width: 100%\" basic primary @click.prevent=\"logon\">注册</sui-button>\n          </sui-form-field>\n          <sui-form-field>\n            <div style=\"overflow: hidden\">\n              <a style=\"float:right\" @click=\"showLoginForm\">已有账号登录</a>\n            </div>\n          </sui-form-field>\n        </sui-form>\n        <!-- 注册表单结束 -->\n      </Modal>\n      <!-- 登录注册模态框 END -->\n    </header>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Header',\n  data () {\n    return {\n      q: '',\n      logInOnModel: {\n        show: false,\n        title: '登录',\n        isLogin: true\n      },\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      logonForm: {\n        username: '',\n        email: '',\n        password: '',\n        rePassword: ''\n      },\n      rules: {},\n      showNotificationCard: false\n    };\n  },\n  computed: {\n    user () {\n      return this.$store.state.user;\n    }\n  },\n  methods: {\n    showLoginForm () {\n      this.logInOnModel.title = '登录';\n      this.logInOnModel.isLogin = true;\n    },\n    showRegisterForm () {\n      this.logInOnModel.title = '注册';\n      this.logInOnModel.isLogin = false;\n    },\n    showErrorNotice (title, desc) {\n      this.$Notice.error({ title, desc });\n    },\n    // 登录\n    login () {\n      if (this.loginForm.username.length === 0) {\n        this.showErrorNotice('登录失败', '请填写用户名或邮箱');\n      } else if (this.loginForm.password.length === 0) {\n        this.showErrorNotice('登录失败', '请填写密码');\n      } else {\n        // TODO 后期需要搬到 vuex\n        this.$axios.post('/api/user/login', this.loginForm)\n          .then(res => {\n            let result = res.data;\n            if (result.success) {\n              this.logInOnModel.show = false;\n              // 保存到 vuex\n              this.$store.commit('userUpdate', result.data);\n              this.loginForm = {\n                username: '',\n                password: ''\n              };\n            }\n          });\n      }\n    },\n    // 注销\n    logout () {\n      this.$axios.post('/api/user/logout')\n        .then(res => {\n          this.$store.commit('userUpdate', null);\n        });\n    },\n    // 注册\n    logon () {\n      if (this.logonForm.username.length === 0) {\n        this.showErrorNotice('注册失败', '请填写用户名');\n      } else if (this.logonForm.email.length === 0 ||\n        !/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/.test(this.logonForm.email)) {\n        this.showErrorNotice('注册失败', '请填写合法的邮箱');\n      } else if (this.logonForm.password.length === 0 ||\n        this.logonForm.password !== this.logonForm.rePassword) {\n        this.showErrorNotice('注册失败', '两次输入的密码不一致');\n      } else {\n        // TODO 2024/6/6 后期需要搬到 vuex\n        this.$axios.post('/api/user/logon', this.logonForm)\n          .then(res => {\n            this.$Notice.success({ title: 'Bingo', desc: '注册成功' });\n            this.showLoginForm();\n          });\n      }\n    },\n    // 第三方登录\n    oauth () {\n      this.$Notice.warning({ title: 'Hey', desc: '功能正在开发中 🚀' });\n    },\n    // 全文搜索界面\n    toSearch () {\n      this.$router.push({ name: 'search', query: { q: this.q } });\n    },\n    // 消息中心\n    toMessage () {\n      this.showNotificationCard = false;\n      if (!this.$store.state.user) {\n        this.logInOnModel.show = true;\n      } else {\n        this.$router.push('/message');\n      }\n    }\n  },\n  mounted () {\n    // TODO 2024/6/6 也可以在这里加载 WebSocket\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n\n.header-wrapper {\n  height: 70px;\n}\n\nheader {\n  position: fixed;\n  z-index: 2;\n  width: 100%;\n  height: 70px;\n  background: #fff;\n  box-shadow: 0 0 8px 0 rgba(0, 0, 0, .1);\n}\n\n.container {\n  width: 1200px;\n  margin: 0 auto;\n  overflow: hidden;\n\n  .logo {\n    float: left;\n    height: 55px;\n    margin-top: 10px;\n  }\n\n  nav {\n    float: left;\n    margin-left: 30px;\n    line-height: 65px;\n\n    ul {\n      list-style-type: none;\n      padding-top: 5px;\n      font-size: 16px;\n\n      li {\n        display: inline-block;\n        margin-right: 20px;\n\n        a {\n          color: #aaa;\n        }\n\n        a:hover {\n          color: #ff8364;\n        }\n      }\n    }\n  }\n\n  .avatar-wrapper {\n    float: right;\n    width: 58px;\n    height: 58px;\n    margin-top: 7px;\n\n    .avatar-img {\n      width: 100%;\n      height: 100%;\n      margin-right: 0;\n    }\n  }\n\n  .notification {\n    float: right;\n    margin-top: 22px;\n    margin-right: 30px;\n\n    .notification-card-wrapper {\n      position: absolute;\n      margin-top: 20px;\n      margin-left: -300px;\n\n      .notification-card {\n        width: 400px;\n\n        .notification-list {\n          max-height: 400px;\n          overflow: auto;\n          margin-right: -7px;\n          padding-right: 5px;\n          font-size: .85em;\n\n          .item {\n            padding-top: 10px;\n            margin-bottom: 10px;\n\n            a {\n              color: #455A64;\n            }\n\n            a:hover {\n              color: #FF8364;\n            }\n\n            .ivu-time {\n              color: #7a7a7a;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  .search-container {\n    float: right;\n    margin-top: 18px;\n    margin-right: 25px;\n  }\n\n  .ivu-form-item:last-child {\n    margin-bottom: 0;\n  }\n}\n\n.login-on-modal {\n  .oauth {\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n    margin-top: 15px;\n\n    .oauth-bg {\n      width: 45px;\n      height: 45px;\n      border-radius: 50%;\n      background-color: #f4f8fb;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      img {\n        height: 1.7rem;\n        vertical-align: bottom;\n        cursor: pointer;\n      }\n    }\n  }\n}\n</style>\n"],"mappings":"AA2KA;EACAA,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,CAAA;MACAC,YAAA;QACAC,IAAA;QACAC,KAAA;QACAC,OAAA;MACA;MACAC,SAAA;QACAC,QAAA;QACAC,QAAA;MACA;MACAC,SAAA;QACAF,QAAA;QACAG,KAAA;QACAF,QAAA;QACAG,UAAA;MACA;MACAC,KAAA;MACAC,oBAAA;IACA;EACA;EACAC,QAAA;IACAC,IAAA,WAAAA,KAAA;MACA,YAAAC,MAAA,CAAAC,KAAA,CAAAF,IAAA;IACA;EACA;EACAG,OAAA;IACAC,aAAA,WAAAA,cAAA;MACA,KAAAjB,YAAA,CAAAE,KAAA;MACA,KAAAF,YAAA,CAAAG,OAAA;IACA;IACAe,gBAAA,WAAAA,iBAAA;MACA,KAAAlB,YAAA,CAAAE,KAAA;MACA,KAAAF,YAAA,CAAAG,OAAA;IACA;IACAgB,eAAA,WAAAA,gBAAAjB,KAAA,EAAAkB,IAAA;MACA,KAAAC,OAAA,CAAAC,KAAA;QAAApB,KAAA,EAAAA,KAAA;QAAAkB,IAAA,EAAAA;MAAA;IACA;IACA;IACAG,KAAA,WAAAA,MAAA;MAAA,IAAAC,KAAA;MACA,SAAApB,SAAA,CAAAC,QAAA,CAAAoB,MAAA;QACA,KAAAN,eAAA;MACA,gBAAAf,SAAA,CAAAE,QAAA,CAAAmB,MAAA;QACA,KAAAN,eAAA;MACA;QACA;QACA,KAAAO,MAAA,CAAAC,IAAA,yBAAAvB,SAAA,EACAwB,IAAA,WAAAC,GAAA;UACA,IAAAC,MAAA,GAAAD,GAAA,CAAA/B,IAAA;UACA,IAAAgC,MAAA,CAAAC,OAAA;YACAP,KAAA,CAAAxB,YAAA,CAAAC,IAAA;YACA;YACAuB,KAAA,CAAAV,MAAA,CAAAkB,MAAA,eAAAF,MAAA,CAAAhC,IAAA;YACA0B,KAAA,CAAApB,SAAA;cACAC,QAAA;cACAC,QAAA;YACA;UACA;QACA;MACA;IACA;IACA;IACA2B,MAAA,WAAAA,OAAA;MAAA,IAAAC,MAAA;MACA,KAAAR,MAAA,CAAAC,IAAA,qBACAC,IAAA,WAAAC,GAAA;QACAK,MAAA,CAAApB,MAAA,CAAAkB,MAAA;MACA;IACA;IACA;IACAG,KAAA,WAAAA,MAAA;MAAA,IAAAC,MAAA;MACA,SAAA7B,SAAA,CAAAF,QAAA,CAAAoB,MAAA;QACA,KAAAN,eAAA;MACA,gBAAAZ,SAAA,CAAAC,KAAA,CAAAiB,MAAA,UACA,sDAAAY,IAAA,MAAA9B,SAAA,CAAAC,KAAA;QACA,KAAAW,eAAA;MACA,gBAAAZ,SAAA,CAAAD,QAAA,CAAAmB,MAAA,UACA,KAAAlB,SAAA,CAAAD,QAAA,UAAAC,SAAA,CAAAE,UAAA;QACA,KAAAU,eAAA;MACA;QACA;QACA,KAAAO,MAAA,CAAAC,IAAA,yBAAApB,SAAA,EACAqB,IAAA,WAAAC,GAAA;UACAO,MAAA,CAAAf,OAAA,CAAAU,OAAA;YAAA7B,KAAA;YAAAkB,IAAA;UAAA;UACAgB,MAAA,CAAAnB,aAAA;QACA;MACA;IACA;IACA;IACAqB,KAAA,WAAAA,MAAA;MACA,KAAAjB,OAAA,CAAAkB,OAAA;QAAArC,KAAA;QAAAkB,IAAA;MAAA;IACA;IACA;IACAoB,QAAA,WAAAA,SAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QAAA7C,IAAA;QAAA8C,KAAA;UAAA5C,CAAA,OAAAA;QAAA;MAAA;IACA;IACA;IACA6C,SAAA,WAAAA,UAAA;MACA,KAAAjC,oBAAA;MACA,UAAAG,MAAA,CAAAC,KAAA,CAAAF,IAAA;QACA,KAAAb,YAAA,CAAAC,IAAA;MACA;QACA,KAAAwC,OAAA,CAAAC,IAAA;MACA;IACA;EACA;EACAG,OAAA,WAAAA,QAAA;IACA;EAAA;AAEA","ignoreList":[]}]}